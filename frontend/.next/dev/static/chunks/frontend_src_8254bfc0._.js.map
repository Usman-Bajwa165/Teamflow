{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["C:/Users/Window/Desktop/Teamflow/frontend/src/components/dnd/SortableItem.tsx"],"sourcesContent":["// frontend/src/components/dnd/SortableItem.tsx\r\n'use client';\r\nimport React from 'react';\r\nimport { useSortable } from '@dnd-kit/sortable';\r\nimport { CSS } from '@dnd-kit/utilities';\r\n\r\nexport function SortableItem({ id, title, onOpen }: { id: string; title: string; onOpen?: () => void }) {\r\n  const { attributes, listeners, setNodeRef, transform, transition, isDragging } = useSortable({ id });\r\n  const style: React.CSSProperties = {\r\n    transform: CSS.Transform.toString(transform),\r\n    transition,\r\n    cursor: isDragging ? 'grabbing' : 'grab',\r\n    zIndex: isDragging ? 50 : 'auto',\r\n  };\r\n\r\n  return (\r\n    <div ref={setNodeRef} style={style} {...attributes} {...listeners} className=\"p-2 bg-white rounded border flex items-center justify-between\">\r\n      <div className=\"text-sm truncate\">{title}</div>\r\n      <button onClick={onOpen} className=\"text-xs text-slate-500 ml-2\">⋯</button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["c","_c","React","useSortable","CSS","SortableItem","t0","$","$i","Symbol","for","id","title","onOpen","t1","attributes","listeners","setNodeRef","transform","transition","isDragging","t2","Transform","toString","t3","t4","t5","cursor","zIndex","style","t6","t7","t8"],"mappings":"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","ignoreList":[],"debugId":null}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["C:/Users/Window/Desktop/Teamflow/frontend/src/components/TaskBoard.tsx"],"sourcesContent":["// frontend/src/components/TaskBoard.tsx\r\n'use client';\r\nimport React, { useState } from 'react';\r\nimport {\r\n  DndContext,\r\n  DragEndEvent,\r\n  PointerSensor,\r\n  useSensor,\r\n  useSensors,\r\n  closestCenter,\r\n  DragStartEvent,\r\n  useDroppable,\r\n} from '@dnd-kit/core';\r\nimport {\r\n  arrayMove,\r\n  SortableContext,\r\n  verticalListSortingStrategy,\r\n} from '@dnd-kit/sortable';\r\nimport { SortableItem } from './dnd/SortableItem';\r\n\r\nexport type Task = { id: string; title: string; position?: number; description?: string };\r\nexport type Column = { id: string; title: string; position?: number; tasks: Task[] };\r\n\r\ntype Props = {\r\n  columns: Column[]; // controlled source of truth\r\n  onMove: (taskId: string, targetColumnId: string, targetPosition: number) => Promise<void>;\r\n  onColumnsChange?: (cols: Column[]) => void; // called for optimistic updates & rollbacks\r\n  onAddTask?: (columnId: string, title: string) => Promise<void>;\r\n  onOpenTask?: (taskId: string) => void;\r\n};\r\n\r\nfunction EmptyDropPad({ colId }: { colId: string }) {\r\n  // give empty pad a distinct id so we can detect \"over empty column\" reliably\r\n  const dropId = `empty-${colId}`;\r\n  const { setNodeRef, isOver } = useDroppable({ id: dropId });\r\n  return (\r\n    <div\r\n      ref={setNodeRef}\r\n      data-empty-pad\r\n      style={{\r\n        minHeight: 48,\r\n        borderRadius: 6,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        opacity: isOver ? 0.7 : 0.08,\r\n      }}\r\n      className=\"bg-white/10\"\r\n    >\r\n      {isOver ? 'Release to drop' : ''}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function TaskBoard({\r\n  columns = [],\r\n  onMove,\r\n  onColumnsChange,\r\n  onAddTask,\r\n  onOpenTask,\r\n}: Props) {\r\n  const sensors = useSensors(useSensor(PointerSensor, { activationConstraint: { distance: 5 } }));\r\n  const [newTaskTitles, setNewTaskTitles] = useState<Record<string, string>>({});\r\n\r\n  // helper to find column by either a task id or column id or empty-pad id\r\n  function findColumnByContainedId(id: string) {\r\n    // if id looks like 'empty-<colId>' treat as column id\r\n    if (id.startsWith('empty-')) {\r\n      const cid = id.slice('empty-'.length);\r\n      const byCol = columns.find((c) => c.id === cid);\r\n      if (byCol) return { column: byCol, matchedBy: 'empty-pad' as const, rawId: id };\r\n    }\r\n\r\n    // try task id\r\n    const byTask = columns.find((c) => (c.tasks || []).some((t) => t.id === id));\r\n    if (byTask) return { column: byTask, matchedBy: 'task' as const, rawId: id };\r\n\r\n    // try column id\r\n    const byCol = columns.find((c) => c.id === id);\r\n    if (byCol) return { column: byCol, matchedBy: 'column' as const, rawId: id };\r\n\r\n    return null;\r\n  }\r\n\r\n  async function handleDragEnd(event: DragEndEvent) {\r\n    const { active, over } = event;\r\n    if (!over) return;\r\n\r\n    const activeId = String(active.id);\r\n    const overId = String(over.id);\r\n    if (activeId === overId) return;\r\n\r\n    const sourceInfo = findColumnByContainedId(activeId);\r\n    const destInfo = findColumnByContainedId(overId);\r\n    if (!sourceInfo || !destInfo) return;\r\n\r\n    const sourceCol = sourceInfo.column;\r\n    const destCol = destInfo.column;\r\n\r\n    const prevCols = columns.map((c) => ({ ...c, tasks: [...(c.tasks || [])] }));\r\n\r\n    // same-column reorder (matched by task)\r\n    if (sourceCol.id === destCol.id && sourceInfo.matchedBy === 'task' && destInfo.matchedBy === 'task') {\r\n      const sourceIndex = sourceCol.tasks.findIndex((t) => t.id === activeId);\r\n      const destIndex = destCol.tasks.findIndex((t) => t.id === overId);\r\n      if (sourceIndex === -1 || destIndex === -1) return;\r\n\r\n      const newTasks = arrayMove([...sourceCol.tasks], sourceIndex, destIndex);\r\n      const newCols = columns.map((c) => (c.id === sourceCol.id ? { ...c, tasks: newTasks } : c));\r\n      onColumnsChange?.(newCols);\r\n      try {\r\n        await onMove(activeId, destCol.id, destIndex);\r\n      } catch {\r\n        onColumnsChange?.(prevCols);\r\n      }\r\n      return;\r\n    }\r\n\r\n    // cross-column move\r\n    const srcTasks = [...(sourceCol.tasks || [])];\r\n    const dstTasks = [...(destCol.tasks || [])];\r\n\r\n    const sourceIndex = srcTasks.findIndex((t) => t.id === activeId);\r\n    if (sourceIndex === -1) return;\r\n\r\n    // destIndex: if over matched as task -> index of that task; if matched as empty-pad or column, drop at end\r\n    let destIndex = dstTasks.findIndex((t) => t.id === overId);\r\n    if (destIndex === -1) {\r\n      // overId may be 'empty-<colId>' or the column id itself -> drop to end\r\n      destIndex = dstTasks.length;\r\n    }\r\n\r\n    const [moved] = srcTasks.splice(sourceIndex, 1);\r\n    dstTasks.splice(destIndex, 0, moved);\r\n\r\n    const newCols = columns.map((c) => {\r\n      if (c.id === sourceCol.id) return { ...c, tasks: srcTasks };\r\n      if (c.id === destCol.id) return { ...c, tasks: dstTasks };\r\n      return c;\r\n    });\r\n\r\n    onColumnsChange?.(newCols);\r\n\r\n    try {\r\n      await onMove(activeId, destCol.id, destIndex);\r\n    } catch {\r\n      onColumnsChange?.(prevCols);\r\n    }\r\n  }\r\n\r\n  function handleDragStart(_e: DragStartEvent) {\r\n    // reserved for future\r\n  }\r\n\r\n  async function handleAddTask(columnId: string) {\r\n    const title = (newTaskTitles[columnId] || '').trim();\r\n    if (!title) return;\r\n    // clear input immediately for snappy UX\r\n    setNewTaskTitles((s) => ({ ...s, [columnId]: '' }));\r\n    if (onAddTask) {\r\n      try {\r\n        await onAddTask(columnId, title);\r\n      } catch (err) {\r\n        // if adding failed, surface nothing here — parent will show message\r\n        // optionally restore title on failure\r\n        setNewTaskTitles((s) => ({ ...s, [columnId]: title }));\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <DndContext sensors={sensors} collisionDetection={closestCenter} onDragEnd={handleDragEnd} onDragStart={handleDragStart}>\r\n      <div className=\"w-full overflow-x-auto\">\r\n        <div className=\"flex gap-4 px-2\" style={{ minHeight: '60vh' }}>\r\n          {columns.map((col) => (\r\n            <div\r\n              key={col.id}\r\n              className=\"flex-shrink-0 bg-gray-100 rounded overflow-hidden\"\r\n              style={{\r\n                width: 320,\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                height: '70vh', // fixed column height\r\n              }}\r\n            >\r\n              {/* header (fixed) */}\r\n              <div className=\"px-3 py-2 border-b bg-white\" style={{ flexShrink: 0 }}>\r\n                <div className=\"font-semibold text-sm truncate\">{col.title}</div>\r\n              </div>\r\n\r\n              {/* body (scrolls) */}\r\n              <div className=\"p-3 overflow-y-auto\" style={{ flex: 1 }}>\r\n                <SortableContext items={(col.tasks || []).map((t) => t.id)} strategy={verticalListSortingStrategy}>\r\n                  <div className=\"space-y-2\">\r\n                    {(col.tasks || []).length > 0 ? (\r\n                      (col.tasks || []).map((t) => <SortableItem key={t.id} id={t.id} title={t.title} onOpen={() => onOpenTask?.(t.id)} />)\r\n                    ) : (\r\n                      // droppable pad for empty column (accept drops)\r\n                      <EmptyDropPad colId={col.id} />\r\n                    )}\r\n                  </div>\r\n                </SortableContext>\r\n              </div>\r\n\r\n              {/* footer - add task (fixed at bottom) */}\r\n              <div className=\"p-3 border-t bg-white\" style={{ flexShrink: 0 }}>\r\n                <div className=\"flex gap-2\">\r\n                  <input\r\n                    value={newTaskTitles[col.id] || ''}\r\n                    onChange={(e) => setNewTaskTitles((prev) => ({ ...prev, [col.id]: e.target.value }))}\r\n                    placeholder={`New task in ${col.title}`}\r\n                    className=\"flex-1 px-2 py-1 border rounded\"\r\n                  />\r\n                  <button\r\n                    onClick={() => handleAddTask(col.id)}\r\n                    className=\"px-3 py-1 bg-green-600 text-white rounded\"\r\n                  >\r\n                    Add\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </DndContext>\r\n  );\r\n}\r\n"],"names":["c","_c","React","useState","DndContext","DragEndEvent","PointerSensor","useSensor","useSensors","closestCenter","DragStartEvent","useDroppable","arrayMove","SortableContext","verticalListSortingStrategy","SortableItem","Task","id","title","position","description","Column","tasks","Props","columns","onMove","taskId","targetColumnId","targetPosition","Promise","onColumnsChange","cols","onAddTask","columnId","onOpenTask","EmptyDropPad","t0","$","$i","Symbol","for","colId","dropId","t1","setNodeRef","isOver","t2","t3","minHeight","borderRadius","display","alignItems","justifyContent","opacity","t4","t5","TaskBoard","undefined","activationConstraint","distance","sensors","newTaskTitles","setNewTaskTitles","findColumnByContainedId","startsWith","cid","slice","byCol","find","column","matchedBy","const","rawId","byTask","c_0","some","t","byCol_0","c_1","t6","handleDragEnd","event","active","over","activeId","String","overId","sourceInfo","destInfo","sourceCol","destCol","prevCols","map","_TaskBoardHandleDragEndColumnsMap","sourceIndex","findIndex","t_0","destIndex","t_1","newTasks","newCols","c_3","srcTasks","dstTasks","sourceIndex_0","t_2","destIndex_0","t_3","length","moved","splice","newCols_0","c_4","t7","handleDragStart","_e","t8","handleAddTask","trim","s","t9","s_0","t10","t11","col","width","flexDirection","height","flexShrink","flex","_TaskBoardColumnsMapAnonymous","t_5","TaskBoard[columns.map() > (anonymous)() > <SortableItem>.onOpen]","e","prev","target","value","TaskBoard[columns.map() > <button>.onClick]","t12","t_4","c_2"],"mappings":"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","ignoreList":[],"debugId":null}},
    {"offset": {"line": 682, "column": 0}, "map": {"version":3,"sources":["C:/Users/Window/Desktop/Teamflow/frontend/src/app/projects/[id]/page.tsx"],"sourcesContent":["\"use client\";\r\n// frontend/src/app/projects/[id]/page.tsx\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\nimport {\r\n  getProject,\r\n  createColumn,\r\n  createTask,\r\n  moveTask,\r\n} from \"../../../lib/api\";\r\nimport TaskBoard, { Column } from \"../../../components/TaskBoard\";\r\n\r\nexport default function ProjectBoard() {\r\n  const params = useParams();\r\n  const projectId = params.id;\r\n  const [project, setProject] = useState<any>(null);\r\n  const [newColTitle, setNewColTitle] = useState(\"\");\r\n  const [msg, setMsg] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (!projectId) return;\r\n      try {\r\n        const p = await getProject(projectId);\r\n        const normalized = {\r\n          ...p,\r\n          columns: (p?.columns || []).map((c: any) => ({\r\n            ...c,\r\n            tasks: c?.tasks || [],\r\n          })),\r\n        };\r\n        setProject(normalized);\r\n      } catch (err) {\r\n        setMsg(\"Failed to load project\");\r\n      }\r\n    })();\r\n  }, [projectId]);\r\n\r\n  async function addColumn(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    setMsg(null);\r\n    const title = (newColTitle || \"\").trim();\r\n    if (!title) {\r\n      setMsg(\"Column title required\");\r\n      return;\r\n    }\r\n    try {\r\n      const col = await createColumn(project.id, title);\r\n      const newCol = { ...col, tasks: col?.tasks || [] };\r\n      setProject((prev) => ({\r\n        ...(prev || {}),\r\n        columns: (prev?.columns || []).concat(newCol),\r\n      }));\r\n      setNewColTitle(\"\");\r\n    } catch (err: any) {\r\n      setMsg(err?.body?.message || \"Failed to create column\");\r\n    }\r\n  }\r\n\r\n  // called by TaskBoard for optimistic updates & rollbacks\r\n  function handleColumnsChange(cols: Column[]) {\r\n    setProject((prev) => ({ ...(prev || {}), columns: cols }));\r\n  }\r\n\r\n  // forward to API\r\n  async function handleMove(\r\n    taskId: string,\r\n    targetColumnId: string,\r\n    targetPosition: number\r\n  ) {\r\n    await moveTask(taskId, targetColumnId, targetPosition);\r\n  }\r\n\r\n  // called by TaskBoard footer add-button\r\n  async function handleAddTask(columnId: string, title: string) {\r\n    setMsg(null);\r\n    try {\r\n      const t = await createTask(columnId, title);\r\n      setProject((prev) => ({\r\n        ...(prev || {}),\r\n        columns: (prev?.columns || []).map((c: any) =>\r\n          c.id === columnId ? { ...c, tasks: [...(c.tasks || []), t] } : c\r\n        ),\r\n      }));\r\n    } catch (err: any) {\r\n      setMsg(err?.body?.message || \"Failed to create task\");\r\n      throw err; // rethrow so TaskBoard can optionally react (we already cleared input)\r\n    }\r\n  }\r\n\r\n  if (!project) return <div>Loading project...</div>;\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"text-2xl font-bold mb-4\">{project.name}</h2>\r\n      {msg && <div className=\"mb-3 text-red-600\">{msg}</div>}\r\n\r\n      <div className=\"mb-4\">\r\n        <form onSubmit={addColumn} className=\"flex gap-2\">\r\n          <input\r\n            value={newColTitle}\r\n            onChange={(e) => setNewColTitle(e.target.value)}\r\n            placeholder=\"New column title\"\r\n            className=\"px-3 py-2 border rounded flex-1\"\r\n          />\r\n          <button className=\"bg-slate-600 text-white px-3 py-2 rounded\">\r\n            Add column\r\n          </button>\r\n        </form>\r\n      </div>\r\n\r\n      <TaskBoard\r\n        columns={project.columns as Column[]}\r\n        onMove={handleMove}\r\n        onColumnsChange={handleColumnsChange}\r\n        onAddTask={handleAddTask}\r\n        onOpenTask={(taskId) => console.log(\"open task\", taskId)}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":["React","useEffect","useState","useParams","getProject","createColumn","createTask","moveTask","TaskBoard","Column","ProjectBoard","params","projectId","id","project","setProject","newColTitle","setNewColTitle","msg","setMsg","p","normalized","columns","map","c","tasks","err","addColumn","e","FormEvent","preventDefault","title","trim","col","newCol","prev","concat","body","message","handleColumnsChange","cols","handleMove","taskId","targetColumnId","targetPosition","handleAddTask","columnId","t","name","target","value","console","log"],"mappings":";;;;;AACA,0CAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SACEC,UAAU,EACVC,YAAY,EACZC,UAAU,EACVC,QAAQ,QACH,kBAAkB;AACzB,OAAOC,SAAS,IAAIC,MAAM,QAAQ,+BAA+B;;;AAVjE,YAAY;;;;;AAYG;;IACb,MAAME,MAAM;IACZ,MAAMC,SAAS,GAAGD,MAAM,CAACE,EAAE;IAC3B,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,OAAGb,qLAAQ,CAAC,CAAK,EAAF,CAAC,CAAK,CAAC;IACjD,MAAM,CAACc,WAAW,EAAEC,cAAc,CAAC,OAAGf,qLAAQ,EAAC,EAAE,CAAC;IAClD,MAAM,CAACgB,GAAG,EAAEC,MAAM,CAAC,OAAGjB,qLAAQ,CAAC,CAAe,IAAI,CAAb,AAAc,GAAX,IAAI,CAAC;IAE7CD,0LAAS;kCAAC,MAAM;;0CACb,YAAY;oBACX,IAAI,CAACW,SAAS,EAAE;oBAChB,IAAI;wBACF,MAAMQ,CAAC,GAAG,MAHd,IAGoBhB,8IAAU,AAY7B,EAZ8BQ,AAY5B,CAAC,QAZoC,CAAC;wBACrC,MAAMS,UAAU,GAAG;4BACjB,GAAGD,CAAC;4BACJE,OAAO,EAAE,CAACF,CAAC,EAAEE,OAAO,IAAI,EAAE,EAAEC,GAAG;0DAAC,CAACC,CAAC,EAAE,CAAG,CAAM,CAAN;wCACrC,GAAGA,CAAC;wCACJC,KAAK,EAAED,CAAC,EAAEC,KAAK,IAAI,EAAA;oCACrB,CAAC,CAAC;;wBACJ,CAAC;wBACDV,UAAU,CAACM,UAAU,CAAC;oBACxB,CAAC,CAAC,OAAOK,GAAG,EAAE;wBACZP,MAAM,CAAC,wBAAwB,CAAC;oBAClC;gBACF;;QACF,CAAC;iCAAE;QAACP,SAAS;KAAC,CAAC;IAEf,eAAee,SAASA,CAACC,CAAkB,AAAjB,EAAmB,AAAjB5B,KAAK,CAAC6B;QAChCD,CAAC,CAACE,cAAc,CAAC,CAAC;QAClBX,MAAM,CAAC,IAAI,CAAC;QACZ,MAAMY,KAAK,GAAG,CAACf,WAAW,IAAI,EAAE,EAAEgB,IAAI,CAAC,CAAC;QACxC,IAAI,CAACD,KAAK,EAAE;YACVZ,MAAM,CAAC,uBAAuB,CAAC;YAC/B;QACF;QACA,IAAI;YACF,MAAMc,GAAG,GAAG,UAAM5B,gJAAY,EAACS,OAAO,CAACD,EAAE,EAAEkB,KAAK,CAAC;YACjD,MAAMG,MAAM,GAAG;gBAAE,GAAGD,GAAG;gBAAER,KAAK,EAAEQ,GAAG,EAAER,KAAK,IAAI,EAAA;YAAG,CAAC;YAClDV,UAAU,EAAEoB,IAAI,GAAA,CAAM;oBACpB,GAAIA,IAAI,IAAI,CAAC,CAAC,CAAC;oBACfb,OAAO,EAAE,CAACa,IAAI,EAAEb,OAAO,IAAI,EAAE,EAAEc,MAAM,CAACF,MAAM;gBAC9C,CAAC,CAAC,CAAC;YACHjB,cAAc,CAAC,EAAE,CAAC;QACpB,CAAC,CAAC,OAAOS,KAAG,EAAE,AAAK,GAAF;YACfP,MAAM,CAACO,KAAG,EAAEW,IAAI,EAAEC,OAAO,IAAI,yBAAyB,CAAC;QACzD;IACF;IAEA,yDAAA;IACA,SAASC,mBAAmBA,CAACC,IAAI,AAAU,EAAR/B,AAAU,MAAJ;QACvCM,UAAU,EAAEoB,MAAI,GAAA,CAAM;gBAAE,GAAIA,MAAI,IAAI,CAAC,CAAC,CAAC;gBAAEb,OAAO,EAAEkB;YAAK,CAAC,CAAC,CAAC;IAC5D;IAEA,iBAAA;IACA,eAAeC,UAAUA,CACvBC,MAAM,AAAQ,EAAN,AACRC,cAAc,AAAQ,EAAN,AAChBC,cAAc,AAAQ,EAAN,AAChB;QACA,UAAMrC,4IAAQ,EAACmC,MAAM,EAAEC,cAAc,EAAEC,cAAc,CAAC;IACxD;IAEA,wCAAA;IACA,eAAeC,aAAaA,CAACC,QAAQ,AAAQ,EAAN,AAAQf,OAAK,AAAQ,EAAE,AAAR;QACpDZ,MAAM,CAAC,IAAI,CAAC;QACZ,IAAI;YACF,MAAM4B,CAAC,GAAG,UAAMzC,8IAAU,EAACwC,QAAQ,EAAEf,OAAK,CAAC;YAC3ChB,UAAU,EAAEoB,MAAI,GAAA,CAAM;oBACpB,GAAIA,MAAI,IAAI,CAAC,CAAC,CAAC;oBACfb,OAAO,EAAE,CAACa,MAAI,EAAEb,OAAO,IAAI,EAAE,EAAEC,GAAG,CAAC,CAACC,GAAC,EAAE,CACrCA,EADwC,CACvC,CAACX,EAAE,KAAKiC,QAAQ,GAAG;4BAAE,GAAGtB,GAAC;4BAAEC,KAAK,EAAE,CAAC;mCAAID,GAAC,CAACC,KAAK,IAAI,EAAE,CAAC;gCAAEsB,CAAC;6BAAA;wBAAE,CAAC,GAAGvB,GACjE;gBACF,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,OAAOE,KAAG,EAAE,AAAK,GAAF;YACfP,MAAM,CAACO,KAAG,EAAEW,IAAI,EAAEC,OAAO,IAAI,uBAAuB,CAAC;YACrD,MAAMZ,KAAG,CAAC,CAAC,uEAAA;QACb;IACF;IAEA,IAAI,CAACZ,OAAO,EAAE,qBAAO,yMAAC,GAAG;kBAAC,kBAAkB,EAAE,GAAG,CAAC;;;;;;IAElD,qBACE,yMAAC,GAAG,CAAC;;0BACH,yMAAC,EAAE;gBAAC,SAAS,EAAC,yBAAyB,CAAC;0BAACA,OAAO,CAACkC,IAAI,CAAC,EAAE,EAAE,CAAC;;;;;;YAC1D9B,GAAG,kBAAI,yMAAC,GAAG;gBAAC,SAAS,EAAC,mBAAmB,CAAC;0BAACA,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;;;;;;0BAEvD,yMAAC,GAAG;gBAAC,SAAS,EAAC,MAAM,CAAC;wCACpB,yMAAC,IAAI;oBAAC,QAAQ,CAAC,CAACS,SAAS,CAAC;oBAAC,SAAS,EAAC,YAAY,CAAC;;sCAChD,yMAAC,KAAK;4BACJ,KAAK,CAAC,CAACX,WAAW,CAAC;4BACnB,QAAQ,CAAC,EAAEY,GAAC,GAAKX,cAAc,CAACW,GAAC,CAACqB,MAAM,CAACC,KAAK,CAAC,CAAC;4BAChD,WAAW,EAAC,kBAAkB;4BAC9B,SAAS,EAAC,iCAAiC,GAC3C;;;;;;sCACF,yMAAC,MAAM;4BAAC,SAAS,EAAC,2CAA2C;sCAAC;;;;;;;;;;;;;;;;;0BAMlE,yMAAC,yJAAS;gBACR,OAAO,CAAC,CAACpC,OAAO,CAACQ,OAAO,IAAIb,MAAM,EAAE,CAAC;gBACrC,MAAM,CAAC,CAACgC,UAAU,CAAC;gBACnB,eAAe,CAAC,CAACF,mBAAmB,CAAC;gBACrC,SAAS,CAAC,CAACM,aAAa,CAAC;gBACzB,UAAU,CAAC,EAAEH,QAAM,GAAKS,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEV,QAAM,CAAC,CAAC,GACzD;;;;;;;;;;;;AAGR;;;QA3GiBvC,8JAAS,CAAC,CAAC;;;KADJO,YAAYA,CAAA,EAAG","ignoreList":[],"debugId":null}}]
}