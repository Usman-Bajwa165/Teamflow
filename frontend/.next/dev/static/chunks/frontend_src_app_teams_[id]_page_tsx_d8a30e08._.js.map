{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["C:/Users/Window/Desktop/Teamflow/frontend/src/app/teams/[id]/page.tsx"],"sourcesContent":["\"use client\";\r\n// frontend/src/app/teams/[id]/page.tsx\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { useAuth } from \"../../../context/AuthContext\";\r\nimport {\r\n  getTeamDetails as apiGetTeamDetails,\r\n  getProject,\r\n} from \"../../../lib/api\";\r\n\r\ntype UserBase = {\r\n  id: string;\r\n  email: string;\r\n  name?: string | null;\r\n  _count?: { teamMembers?: number };\r\n  teamIds?: string[];\r\n};\r\ntype TeamMember = {\r\n  id: string;\r\n  role: \"owner\" | \"admin\" | \"member\" | string;\r\n  user: UserBase;\r\n};\r\ntype ProjectShort = {\r\n  id: string;\r\n  name?: string;\r\n  description?: string;\r\n  columns?: any[];\r\n  tasks?: any[];\r\n};\r\n\r\ntype Team = {\r\n  id: string;\r\n  name: string;\r\n  ownerId?: string | null;\r\n  members?: TeamMember[];\r\n  projects?: ProjectShort[];\r\n};\r\n\r\nconst API_BASE = process.env.NEXT_PUBLIC_API_BASE ?? \"http://localhost:4000\";\r\n\r\nexport default function TeamPage() {\r\n  const params = useParams();\r\n  const router = useRouter();\r\n  const teamId = Array.isArray(params?.id) ? params.id[0] : params?.id;\r\n  const { user } = useAuth();\r\n\r\n  const [team, setTeam] = useState<Team | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [msg, setMsg] = useState<string | null>(null);\r\n\r\n  const [inviteEmail, setInviteEmail] = useState<string>(\"\");\r\n  const [inviteRole, setInviteRole] = useState<\"member\" | \"admin\" | \"owner\">(\r\n    \"member\"\r\n  );\r\n  const [usersList, setUsersList] = useState<UserBase[] | null>(null);\r\n  const [selectedUserId, setSelectedUserId] = useState<string | null>(null);\r\n\r\n  const [processingMemberId, setProcessingMemberId] = useState<string | null>(\r\n    null\r\n  );\r\n  const [deleting, setDeleting] = useState(false);\r\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\r\n  const [deleteNameInput, setDeleteNameInput] = useState(\"\");\r\n\r\n  if (!teamId) return <div>Invalid team id</div>;\r\n\r\n  function authHeaders() {\r\n    const t =\r\n      typeof window !== \"undefined\" ? localStorage.getItem(\"tf_access\") : null;\r\n    return {\r\n      \"Content-Type\": \"application/json\",\r\n      ...(t ? { Authorization: `Bearer ${t}` } : {}),\r\n    };\r\n  }\r\n\r\n  async function loadTeam() {\r\n    setMsg(null);\r\n    setLoading(true);\r\n    try {\r\n      const data = await apiGetTeamDetails(String(teamId));\r\n      setTeam(data as Team);\r\n\r\n      const projs = (data as any)?.projects;\r\n      if (Array.isArray(projs) && projs.length > 0) {\r\n        try {\r\n          const detailed = await Promise.all(\r\n            projs.map(async (p: any) => {\r\n              if (!p?.id) return p;\r\n              try {\r\n                const full = await getProject(p.id);\r\n                return full;\r\n              } catch {\r\n                return p;\r\n              }\r\n            })\r\n          );\r\n          setTeam((prev) => ({ ...(prev || {}), projects: detailed }));\r\n        } catch {\r\n          // ignore\r\n        }\r\n      }\r\n    } catch (err: unknown) {\r\n      const e = err as { status?: number; body?: any } | Error;\r\n      setMsg(\r\n        (e as any)?.body?.message ||\r\n          (e as Error).message ||\r\n          \"Failed to load team\"\r\n      );\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    loadTeam();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [teamId]);\r\n\r\n  // admin users list (only if global admin)\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async () => {\r\n      setUsersList(null);\r\n      if (!user?.role || user.role !== \"admin\") return;\r\n      try {\r\n        const res = await fetch(`${API_BASE}/admin/users`, {\r\n          headers: authHeaders(),\r\n        });\r\n        if (!mounted) return;\r\n        if (!res.ok) {\r\n          setUsersList(null);\r\n          return;\r\n        }\r\n        const json = await res.json();\r\n        let arr: UserBase[] = [];\r\n        if (Array.isArray(json)) arr = json as UserBase[];\r\n        else if (Array.isArray(json.users)) arr = json.users;\r\n        else if (Array.isArray(json.data)) arr = json.data;\r\n        else arr = json as UserBase[];\r\n        if (mounted) setUsersList(arr);\r\n      } catch {\r\n        if (mounted) setUsersList(null);\r\n      }\r\n    })();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [user?.role]);\r\n\r\n  const myUserId = user?.id ?? null;\r\n  const myMembership = team?.members?.find((m) => m.user?.id === myUserId);\r\n  const myRoleInTeam = myMembership?.role ?? null;\r\n  const canManage =\r\n    user?.role === \"admin\" ||\r\n    myRoleInTeam === \"owner\" ||\r\n    myRoleInTeam === \"admin\";\r\n\r\n  const ownerName = useMemo(() => {\r\n    const owner = team?.members?.find((m) => m.role === \"owner\");\r\n    return owner?.user?.name ?? owner?.user?.email ?? team?.ownerId ?? \"—\";\r\n  }, [team]);\r\n\r\n  // collect all tasks across team's projects\r\n  const allProjectTasks = useMemo(() => {\r\n    const tasks: any[] = [];\r\n    (team?.projects || []).forEach((p: any) => {\r\n      if (Array.isArray(p.tasks) && p.tasks.length)\r\n        tasks.push(\r\n          ...p.tasks.map((t: any) => ({\r\n            ...t,\r\n            projectId: p.id,\r\n            projectName: p.name,\r\n          }))\r\n        );\r\n      else if (Array.isArray(p.columns)) {\r\n        p.columns.forEach((c: any) => {\r\n          if (Array.isArray(c.tasks))\r\n            tasks.push(\r\n              ...c.tasks.map((t: any) => ({\r\n                ...t,\r\n                projectId: p.id,\r\n                projectName: p.name,\r\n              }))\r\n            );\r\n        });\r\n      }\r\n    });\r\n    return tasks;\r\n  }, [team]);\r\n\r\n  // map userId => tasks array\r\n  const memberTaskMap = useMemo(() => {\r\n    const map = new Map<string, any[]>();\r\n    (team?.members || []).forEach((m) => map.set(m.user.id, []));\r\n    allProjectTasks.forEach((t) => {\r\n      const aId = t.assigneeId ?? t.assignee?.id;\r\n      if (aId && map.has(aId)) {\r\n        map.get(aId)!.push(t);\r\n      }\r\n    });\r\n    return map;\r\n  }, [team, allProjectTasks]);\r\n\r\n  const totalMembers = team?.members?.length ?? 0;\r\n  const totalProjects = team?.projects?.length ?? 0;\r\n  const totalTasks = allProjectTasks.length;\r\n  const availableMembers =\r\n    team?.members?.filter(\r\n      (m) => (memberTaskMap.get(m.user.id) || []).length === 0\r\n    ).length ?? 0;\r\n\r\n  async function handleInvite(e?: React.FormEvent) {\r\n    e?.preventDefault();\r\n    setMsg(null);\r\n    if (!canManage) {\r\n      setMsg(\"Not permitted\");\r\n      return;\r\n    }\r\n    setProcessingMemberId(\"invite\");\r\n    try {\r\n      let body: { email: string; role: string };\r\n      if (selectedUserId && usersList) {\r\n        const u = usersList.find((x) => x.id === selectedUserId);\r\n        if (!u) throw new Error(\"Selected user not found\");\r\n        body = { email: u.email, role: inviteRole };\r\n      } else {\r\n        if (!inviteEmail) {\r\n          setMsg(\"Enter email or select a user\");\r\n          setProcessingMemberId(null);\r\n          return;\r\n        }\r\n        body = { email: inviteEmail, role: inviteRole };\r\n      }\r\n\r\n      const r = await fetch(`${API_BASE}/teams/${teamId}/invite`, {\r\n        method: \"POST\",\r\n        headers: authHeaders(),\r\n        body: JSON.stringify(body),\r\n      });\r\n      if (!r.ok) {\r\n        const txt = await r.text().catch(() => \"\");\r\n        const parsed = (() => {\r\n          try {\r\n            return JSON.parse(txt);\r\n          } catch {\r\n            return null;\r\n          }\r\n        })();\r\n        const message =\r\n          parsed?.message ||\r\n          parsed?.error ||\r\n          txt ||\r\n          `Invite failed (${r.status})`;\r\n        setMsg(message);\r\n        setProcessingMemberId(null);\r\n        return;\r\n      }\r\n\r\n      setInviteEmail(\"\");\r\n      setSelectedUserId(null);\r\n      setInviteRole(\"member\");\r\n      await loadTeam();\r\n      setMsg(\"Invitation/added successfully.\");\r\n    } catch (err: unknown) {\r\n      setMsg((err as Error).message || \"Network error\");\r\n    } finally {\r\n      setProcessingMemberId(null);\r\n    }\r\n  }\r\n\r\n  async function changeMemberRole(memberId: string, newRole: string) {\r\n    if (!canManage) {\r\n      setMsg(\"Not permitted\");\r\n      return;\r\n    }\r\n    setProcessingMemberId(memberId);\r\n    try {\r\n      const r = await fetch(\r\n        `${API_BASE}/teams/${teamId}/members/${memberId}/role`,\r\n        {\r\n          method: \"PATCH\",\r\n          headers: authHeaders(),\r\n          body: JSON.stringify({ role: newRole }),\r\n        }\r\n      );\r\n      if (!r.ok) {\r\n        const txt = await r.text().catch(() => \"\");\r\n        throw new Error(txt || `Failed (${r.status})`);\r\n      }\r\n      await loadTeam();\r\n      setMsg(\"Role updated.\");\r\n    } catch (err: unknown) {\r\n      setMsg((err as Error).message || \"Failed to update role\");\r\n    } finally {\r\n      setProcessingMemberId(null);\r\n    }\r\n  }\r\n\r\n  async function demoteMember(member: TeamMember) {\r\n    const mapping: Record<string, string | null> = {\r\n      owner: \"admin\",\r\n      admin: \"member\",\r\n      member: null,\r\n    };\r\n    const next = mapping[member.role] ?? \"member\";\r\n    if (!next) {\r\n      setMsg(\"Cannot demote further\");\r\n      return;\r\n    }\r\n    await changeMemberRole(member.id, next);\r\n  }\r\n\r\n  async function removeMember(memberId: string) {\r\n    if (!canManage) {\r\n      setMsg(\"Not permitted\");\r\n      return;\r\n    }\r\n    if (!confirm(\"Remove this member from the team?\")) return;\r\n    setProcessingMemberId(memberId);\r\n    try {\r\n      const r = await fetch(`${API_BASE}/teams/${teamId}/members/${memberId}`, {\r\n        method: \"DELETE\",\r\n        headers: authHeaders(),\r\n      });\r\n      if (!r.ok) {\r\n        const txt = await r.text().catch(() => \"\");\r\n        throw new Error(txt || `Failed (${r.status})`);\r\n      }\r\n      await loadTeam();\r\n      setMsg(\"Member removed.\");\r\n    } catch (err: unknown) {\r\n      setMsg((err as Error).message || \"Failed to remove\");\r\n    } finally {\r\n      setProcessingMemberId(null);\r\n    }\r\n  }\r\n\r\n  function openDeleteForm() {\r\n    setDeleteNameInput(\"\");\r\n    setShowDeleteConfirm(true);\r\n    setMsg(null);\r\n  }\r\n\r\n  async function performDeleteTeam() {\r\n    if (!team) return;\r\n    if (deleteNameInput !== team.name) {\r\n      setMsg(\"Typed name does not match exactly.\");\r\n      return;\r\n    }\r\n    setDeleting(true);\r\n    try {\r\n      const r = await fetch(`${API_BASE}/teams/${teamId}`, {\r\n        method: \"DELETE\",\r\n        headers: authHeaders(),\r\n      });\r\n      if (!r.ok) {\r\n        const txt = await r.text().catch(() => \"\");\r\n        throw new Error(txt || `Delete failed (${r.status})`);\r\n      }\r\n      router.push(\"/teams\");\r\n    } catch (err: unknown) {\r\n      setMsg((err as Error).message || \"Failed to delete team\");\r\n    } finally {\r\n      setDeleting(false);\r\n      setShowDeleteConfirm(false);\r\n    }\r\n  }\r\n\r\n  function userIsInOtherTeam(u: UserBase) {\r\n    const count =\r\n      typeof u._count?.teamMembers === \"number\"\r\n        ? u._count!.teamMembers\r\n        : undefined;\r\n    const teamIds = Array.isArray((u as any).teamIds)\r\n      ? ((u as any).teamIds as string[])\r\n      : undefined;\r\n    const alreadyInThis = team?.members?.some((m) => m.user?.id === u.id);\r\n    if (typeof count === \"number\") return count > 0 && !alreadyInThis;\r\n    if (Array.isArray(teamIds)) return teamIds.length > 0 && !alreadyInThis;\r\n    return false;\r\n  }\r\n\r\n  function computeProgressForTasks(tasks: any[]) {\r\n    if (!tasks || tasks.length === 0) return { percent: 0, total: 0, done: 0 };\r\n    const total = tasks.length;\r\n    const done = tasks.filter(\r\n      (t) => String(t.status || \"\").toUpperCase() === \"FINISHED\"\r\n    ).length;\r\n    const percent = Math.round((done / total) * 100);\r\n    return { percent, total, done };\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {loading && <div className=\"text-sm text-gray-600\">Loading team...</div>}\r\n      {msg && <div className=\"text-sm text-red-600\">{msg}</div>}\r\n\r\n      {!loading && team && (\r\n        <>\r\n          <header className=\"bg-white rounded shadow p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-3\">\r\n            <div>\r\n              <h2 className=\"text-2xl font-bold\">{team.name}</h2>\r\n              <div className=\"text-sm text-gray-600 mt-1\">\r\n                Owner: <span className=\"font-medium\">{ownerName}</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex gap-3\">\r\n              <div className=\"bg-gray-50 p-3 rounded text-center min-w-[110px]\">\r\n                <div className=\"text-xs text-gray-500\">Members</div>\r\n                <div className=\"text-lg font-semibold\">{totalMembers}</div>\r\n              </div>\r\n              <div className=\"bg-gray-50 p-3 rounded text-center min-w-[110px]\">\r\n                <div className=\"text-xs text-gray-500\">Projects</div>\r\n                <div className=\"text-lg font-semibold\">{totalProjects}</div>\r\n              </div>\r\n              <div className=\"bg-gray-50 p-3 rounded text-center min-w-[140px]\">\r\n                <div className=\"text-xs text-gray-500\">Tasks (team)</div>\r\n                <div className=\"text-lg font-semibold\">{totalTasks}</div>\r\n                <div className=\"text-xs text-gray-400 mt-1\">\r\n                  Available: {String(availableMembers)}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </header>\r\n\r\n          {/* Manage / invite */}\r\n          {canManage && (\r\n            <section className=\"bg-white p-4 rounded shadow\">\r\n              <h3 className=\"font-semibold mb-3\">Add / invite member</h3>\r\n\r\n              {usersList ? (\r\n                <div className=\"flex gap-2 flex-wrap items-center\">\r\n                  <select\r\n                    value={selectedUserId ?? \"\"}\r\n                    onChange={(e) => setSelectedUserId(e.target.value || null)}\r\n                    className=\"px-3 py-2 border rounded min-w-[280px]\"\r\n                  >\r\n                    <option value=\"\">\r\n                      -- Select a user (or leave blank to enter email) --\r\n                    </option>\r\n                    {usersList\r\n                      .filter((u) => u.id !== myUserId)\r\n                      .map((u) => {\r\n                        const inOther = userIsInOtherTeam(u);\r\n                        const disabled = team.members?.some(\r\n                          (m) => m.user?.id === u.id\r\n                        );\r\n                        return (\r\n                          <option\r\n                            key={u.id}\r\n                            value={u.id}\r\n                            disabled={disabled}\r\n                            style={{\r\n                              backgroundColor: disabled\r\n                                ? \"#f0f0f0\"\r\n                                : inOther\r\n                                ? \"#fff0f0\"\r\n                                : undefined,\r\n                              color: inOther ? \"#900\" : undefined,\r\n                            }}\r\n                          >\r\n                            {u.name ? `${u.name} — ${u.email}` : u.email}\r\n                            {disabled\r\n                              ? \" (already in this team)\"\r\n                              : inOther\r\n                              ? \" (in other team)\"\r\n                              : \"\"}\r\n                          </option>\r\n                        );\r\n                      })}\r\n                  </select>\r\n\r\n                  <input\r\n                    value={inviteEmail}\r\n                    onChange={(e) => setInviteEmail(e.target.value)}\r\n                    placeholder=\"Or enter email manually\"\r\n                    className=\"px-3 py-2 border rounded flex-1 min-w-[220px]\"\r\n                  />\r\n\r\n                  <select\r\n                    value={inviteRole}\r\n                    onChange={(e) => setInviteRole(e.target.value as any)}\r\n                    className=\"px-2 py-2 border rounded\"\r\n                  >\r\n                    <option value=\"member\">Member</option>\r\n                    <option value=\"admin\">Admin</option>\r\n                    <option value=\"owner\">Owner</option>\r\n                  </select>\r\n\r\n                  <button\r\n                    className=\"bg-green-600 text-white px-3 py-2 rounded\"\r\n                    onClick={(e) => handleInvite(e)}\r\n                    disabled={\r\n                      !!processingMemberId && processingMemberId !== \"invite\"\r\n                    }\r\n                  >\r\n                    {processingMemberId === \"invite\"\r\n                      ? \"Working…\"\r\n                      : \"Add / Invite\"}\r\n                  </button>\r\n                </div>\r\n              ) : (\r\n                <form\r\n                  onSubmit={handleInvite}\r\n                  className=\"flex gap-2 flex-wrap items-center\"\r\n                >\r\n                  <input\r\n                    value={inviteEmail}\r\n                    onChange={(e) => setInviteEmail(e.target.value)}\r\n                    placeholder=\"Email to invite\"\r\n                    className=\"px-3 py-2 border rounded\"\r\n                  />\r\n                  <select\r\n                    value={inviteRole}\r\n                    onChange={(e) => setInviteRole(e.target.value as any)}\r\n                    className=\"px-2 py-2 border rounded\"\r\n                  >\r\n                    <option value=\"member\">Member</option>\r\n                    <option value=\"admin\">Admin</option>\r\n                    <option value=\"owner\">Owner</option>\r\n                  </select>\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"bg-green-600 text-white px-3 py-2 rounded\"\r\n                  >\r\n                    Invite\r\n                  </button>\r\n                </form>\r\n              )}\r\n            </section>\r\n          )}\r\n\r\n          {/* Members & workload (including per-member task list) */}\r\n          <section className=\"bg-white p-4 rounded shadow\">\r\n            <h3 className=\"text-lg font-semibold mb-3\">Members & workload</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n              {(team.members || []).map((m) => {\r\n                const tasksForMember = memberTaskMap.get(m.user.id) || [];\r\n                const prog = computeProgressForTasks(tasksForMember);\r\n                const available = tasksForMember.length === 0;\r\n\r\n                const showPromote = m.role === \"member\" || m.role === \"admin\";\r\n                const showDemote = m.role === \"owner\" || m.role === \"admin\";\r\n                const promoteLabel =\r\n                  m.role === \"member\"\r\n                    ? \"Promote\"\r\n                    : m.role === \"admin\"\r\n                    ? \"Make owner\"\r\n                    : \"Promote\";\r\n\r\n                return (\r\n                  <div\r\n                    key={m.id}\r\n                    className=\"p-3 border rounded flex flex-col md:flex-row md:items-start md:justify-between gap-3\"\r\n                  >\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      {/* top row: name + email (left), role (right) */}\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div className=\"min-w-0\">\r\n                          <div className=\"flex items-baseline gap-3\">\r\n                            <div className=\"font-semibold truncate\">\r\n                              {m.user?.name ?? m.user?.email}\r\n                            </div>\r\n                            <div className=\"text-sm text-gray-500 truncate\">\r\n                              ({m.user?.email})\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"text-right ml-4 flex items-center gap-2\">\r\n                          <div className=\" font-bold mr-2\">\r\n                            Role\r\n                          </div>\r\n                          <div className=\"text-sm text-gray-500 truncate mr-10\">\r\n                            {m.role}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* tasks list */}\r\n                      <div className=\"mt-3\">\r\n                        <div className=\"text-xs text-gray-500\">\r\n                          Tasks assigned ({tasksForMember.length})\r\n                        </div>\r\n                        {tasksForMember.length === 0 ? (\r\n                          <div className=\"text-sm text-gray-500 mt-1\">\r\n                            No tasks\r\n                          </div>\r\n                        ) : (\r\n                          <ul className=\"mt-2 space-y-1\">\r\n                            {tasksForMember.map((t: any) => (\r\n                              <li key={t.id} className=\"text-sm text-slate-700\">\r\n                                <span className=\"font-medium\">\r\n                                  {t.projectName ?? t.projectId}\r\n                                </span>\r\n                                <span className=\"mx-2 text-gray-400\">—</span>\r\n                                <span>{t.title ?? \"Untitled task\"}</span>\r\n                                <span className=\"ml-2 text-xs text-gray-400\">\r\n                                  ({String(t.status || \"TODO\")})\r\n                                </span>\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* actions (right column) */}\r\n                    <div className=\"md:w-56 flex flex-col items-end gap-3\">\r\n                      <div className=\"flex gap-2\">\r\n                        {canManage ? (\r\n                          <>\r\n                            {showPromote && (\r\n                              <button\r\n                                className=\"px-2 py-1 border rounded text-sm min-w-24 text-center\"\r\n                                onClick={() => {\r\n                                  const next =\r\n                                    m.role === \"member\"\r\n                                      ? \"admin\"\r\n                                      : m.role === \"admin\"\r\n                                      ? \"owner\"\r\n                                      : undefined;\r\n                                  if (!next) return;\r\n                                  changeMemberRole(m.id, next);\r\n                                }}\r\n                                disabled={!!processingMemberId}\r\n                              >\r\n                                {processingMemberId === m.id\r\n                                  ? \"…\"\r\n                                  : promoteLabel}\r\n                              </button>\r\n                            )}\r\n\r\n                            {showDemote && (\r\n                              <button\r\n                                className=\"px-2 py-1 border rounded text-sm\"\r\n                                onClick={() => demoteMember(m)}\r\n                                disabled={!!processingMemberId}\r\n                              >\r\n                                {processingMemberId === m.id ? \"…\" : \"Demote\"}\r\n                              </button>\r\n                            )}\r\n\r\n                            <button\r\n                              className=\"px-2 py-1 bg-red-600 text-white rounded text-sm\"\r\n                              onClick={() => {\r\n                                if (m.user.id === myUserId) {\r\n                                  alert(\"You cannot remove yourself.\");\r\n                                  return;\r\n                                }\r\n                                removeMember(m.id);\r\n                              }}\r\n                              disabled={\r\n                                !!processingMemberId || m.user.id === myUserId\r\n                              }\r\n                            >\r\n                              {processingMemberId === m.id ? \"…\" : \"Remove\"}\r\n                            </button>\r\n                          </>\r\n                        ) : (\r\n                          <div className=\"text-sm text-gray-500\">View only</div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n\r\n              {(!team.members || team.members.length === 0) && (\r\n                <div className=\"text-sm text-gray-500\">No members yet</div>\r\n              )}\r\n            </div>\r\n          </section>\r\n\r\n          {/* Projects assigned */}\r\n          <section className=\"bg-white p-4 rounded shadow\">\r\n            <h3 className=\"text-lg font-semibold mb-3\">Projects assigned</h3>\r\n            <div className=\"space-y-3\">\r\n              {(team.projects || []).map((p: any) => {\r\n                let projTasks: any[] = [];\r\n                if (Array.isArray(p.tasks) && p.tasks.length)\r\n                  projTasks = p.tasks;\r\n                else if (Array.isArray(p.columns)) {\r\n                  p.columns.forEach((c: any) => {\r\n                    if (Array.isArray(c.tasks)) projTasks.push(...c.tasks);\r\n                  });\r\n                }\r\n                const summary = computeProgressForTasks(projTasks);\r\n                return (\r\n                  <div\r\n                    key={p.id}\r\n                    className=\"p-3 border rounded flex items-center justify-between\"\r\n                  >\r\n                    <div>\r\n                      <div className=\"font-semibold\">{p.name ?? \"—\"}</div>\r\n                      <div className=\"text-sm text-gray-500\">\r\n                        {p.description}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"text-right\">\r\n                      <div className=\"text-sm text-gray-500\">\r\n                        Tasks: {projTasks.length}\r\n                      </div>\r\n                      <div className=\"text-sm font-medium\">\r\n                        {summary.percent}% done\r\n                      </div>\r\n                      <div className=\"mt-2\">\r\n                        <Link\r\n                          href={`/projects/${p.id}`}\r\n                          className=\"text-indigo-600 text-sm\"\r\n                        >\r\n                          Open\r\n                        </Link>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n\r\n              {(team.projects || []).length === 0 && (\r\n                <div className=\"text-sm text-gray-500\">\r\n                  No projects assigned\r\n                </div>\r\n              )}\r\n            </div>\r\n          </section>\r\n\r\n          {/* delete team */}\r\n          {(user?.role === \"admin\" || myRoleInTeam === \"owner\") && (\r\n            <section className=\"mt-4\">\r\n              {!showDeleteConfirm ? (\r\n                <button\r\n                  className=\"bg-red-700 text-white px-3 py-2 rounded\"\r\n                  onClick={openDeleteForm}\r\n                  disabled={deleting || processingMemberId === \"delete-team\"}\r\n                >\r\n                  Delete team\r\n                </button>\r\n              ) : (\r\n                <div className=\"p-4 border rounded bg-yellow-50 max-w-xl\">\r\n                  <div className=\"mb-2\">\r\n                    <strong>Type the team name to confirm deletion:</strong>\r\n                  </div>\r\n                  <div className=\"mb-2\">\r\n                    This will permanently delete the team{\" \"}\r\n                    <strong>{team.name}</strong> and{\" \"}\r\n                    <strong>also delete projects assigned to this team</strong>.\r\n                  </div>\r\n\r\n                  <input\r\n                    value={deleteNameInput}\r\n                    onChange={(e) => setDeleteNameInput(e.target.value)}\r\n                    placeholder=\"Type exact team name\"\r\n                    className=\"px-3 py-2 border rounded w-full mb-3\"\r\n                  />\r\n\r\n                  <div className=\"flex gap-2\">\r\n                    <button\r\n                      className=\"bg-red-700 text-white px-3 py-2 rounded\"\r\n                      onClick={() => performDeleteTeam()}\r\n                      disabled={deleting || deleteNameInput !== team.name}\r\n                    >\r\n                      {deleting ? \"Deleting…\" : \"Delete\"}\r\n                    </button>\r\n                    <button\r\n                      className=\"px-3 py-2 border rounded\"\r\n                      onClick={() => {\r\n                        setShowDeleteConfirm(false);\r\n                        setDeleteNameInput(\"\");\r\n                      }}\r\n                      disabled={deleting}\r\n                    >\r\n                      Cancel\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </section>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["React","useEffect","useMemo","useState","useParams","useRouter","Link","useAuth","getTeamDetails","apiGetTeamDetails","getProject","UserBase","id","email","name","_count","teamMembers","teamIds","TeamMember","role","user","ProjectShort","description","columns","tasks","Team","ownerId","members","projects","API_BASE","process","env","NEXT_PUBLIC_API_BASE","TeamPage","params","router","teamId","Array","isArray","team","setTeam","loading","setLoading","msg","setMsg","inviteEmail","setInviteEmail","inviteRole","setInviteRole","usersList","setUsersList","selectedUserId","setSelectedUserId","processingMemberId","setProcessingMemberId","deleting","setDeleting","showDeleteConfirm","setShowDeleteConfirm","deleteNameInput","setDeleteNameInput","authHeaders","t","window","localStorage","getItem","Authorization","loadTeam","data","String","projs","length","detailed","Promise","all","map","p","full","prev","err","e","status","body","Error","message","mounted","res","fetch","headers","ok","json","arr","users","myUserId","myMembership","find","m","myRoleInTeam","canManage","ownerName","owner","allProjectTasks","forEach","push","projectId","projectName","c","memberTaskMap","Map","set","aId","assigneeId","assignee","has","get","totalMembers","totalProjects","totalTasks","availableMembers","filter","handleInvite","FormEvent","preventDefault","u","x","r","method","JSON","stringify","txt","text","catch","parsed","parse","error","changeMemberRole","memberId","newRole","demoteMember","member","mapping","Record","admin","next","removeMember","confirm","openDeleteForm","performDeleteTeam","userIsInOtherTeam","count","undefined","alreadyInThis","some","computeProgressForTasks","percent","total","done","toUpperCase","Math","round","target","value","inOther","disabled","backgroundColor","color","tasksForMember","prog","available","showPromote","showDemote","promoteLabel","title","alert","projTasks","summary"],"mappings":"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","ignoreList":[],"debugId":null}}]
}