{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["C:/Users/Window/Desktop/Teamflow/frontend/src/app/projects/[id]/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\nimport { getProject, createColumn, createTask } from \"../../../lib/api\";\r\n\r\nexport default function ProjectBoard() {\r\n  const params = useParams();\r\n  const projectId = params.id;\r\n  const [project, setProject] = useState<any>(null);\r\n  const [newColTitle, setNewColTitle] = useState(\"\");\r\n  const [newTaskTitles, setNewTaskTitles] = useState<Record<string, string>>(\r\n    {}\r\n  );\r\n  const [msg, setMsg] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (!projectId) return;\r\n      try {\r\n        const p = await getProject(projectId);\r\n        setProject(p);\r\n      } catch (err) {\r\n        setMsg(\"Failed to load project\");\r\n      }\r\n    })();\r\n  }, [projectId]);\r\n\r\n  async function addColumn(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    setMsg(null);\r\n    const title = (newColTitle || \"\").trim();\r\n    if (!title) {\r\n      setMsg(\"Column title required\");\r\n      return;\r\n    }\r\n    try {\r\n      const col = await createColumn(project.id, title);\r\n      setProject({ ...project, columns: [...(project.columns || []), col] });\r\n      setNewColTitle(\"\");\r\n    } catch (err: any) {\r\n      setMsg(err?.body?.message || \"Failed to create column\");\r\n    }\r\n  }\r\n\r\n  async function addTask(columnId: string) {\r\n    setMsg(null);\r\n    const title = (newTaskTitles[columnId] || \"\").trim();\r\n    if (!title) {\r\n      setMsg(\"Task title required\");\r\n      return;\r\n    }\r\n    try {\r\n      const t = await createTask(columnId, title);\r\n      setProject({\r\n        ...project,\r\n        columns: project.columns.map((c: any) =>\r\n          c.id === columnId ? { ...c, tasks: [...(c.tasks || []), t] } : c\r\n        ),\r\n      });\r\n      setNewTaskTitles((prev) => ({ ...prev, [columnId]: \"\" }));\r\n    } catch (err: any) {\r\n      setMsg(err?.body?.message || \"Failed to create task\");\r\n    }\r\n  }\r\n\r\n  if (!project) return <div>Loading project...</div>;\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"text-2xl font-bold mb-4\">{project.name}</h2>\r\n      {msg && <div className=\"mb-3 text-red-600\">{msg}</div>}\r\n\r\n      <div className=\"mb-4\">\r\n        <form onSubmit={addColumn} className=\"flex gap-2\">\r\n          <input\r\n            value={newColTitle}\r\n            onChange={(e) => setNewColTitle(e.target.value)}\r\n            placeholder=\"New column title\"\r\n            className=\"px-3 py-2 border rounded flex-1\"\r\n          />\r\n          <button className=\"bg-slate-600 text-white px-3 py-2 rounded\">\r\n            Add column\r\n          </button>\r\n        </form>\r\n      </div>\r\n\r\n      <div className=\"flex gap-4 overflow-auto\">\r\n        {project.columns.map((col: any) => (\r\n          <div key={col.id} className=\"bg-gray-100 p-3 rounded min-w-[250px]\">\r\n            <div className=\"font-semibold mb-2\">{col.title}</div>\r\n            <ul className=\"space-y-2\">\r\n              {col.tasks.map((t: any) => (\r\n                <li key={t.id} className=\"p-2 bg-white rounded border\">\r\n                  {t.title}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n\r\n            <div className=\"mt-3\">\r\n              <input\r\n                value={newTaskTitles[col.id] || \"\"}\r\n                onChange={(e) =>\r\n                  setNewTaskTitles((prev) => ({\r\n                    ...prev,\r\n                    [col.id]: e.target.value,\r\n                  }))\r\n                }\r\n                placeholder=\"New task title\"\r\n                className=\"w-full px-2 py-1 border rounded mb-2\"\r\n              />\r\n              <button\r\n                onClick={() => addTask(col.id)}\r\n                className=\"w-full bg-green-600 text-white py-1 rounded\"\r\n              >\r\n                Add task\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["React","useEffect","useState","useParams","getProject","createColumn","createTask","ProjectBoard","params","projectId","id","project","setProject","newColTitle","setNewColTitle","newTaskTitles","setNewTaskTitles","Record","msg","setMsg","p","err","addColumn","e","FormEvent","preventDefault","title","trim","col","columns","body","message","addTask","columnId","t","map","c","tasks","prev","name","target","value"],"mappings":"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","ignoreList":[],"debugId":null}}]
}