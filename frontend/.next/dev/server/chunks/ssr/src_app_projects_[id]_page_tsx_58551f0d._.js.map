{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Window/Desktop/Teamflow/frontend/src/app/projects/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\nimport { getProject, createColumn, createTask } from \"../../../lib/api\";\r\n\r\nexport default function ProjectBoard() {\r\n  const params = useParams();\r\n  const projectId = params.id;\r\n  const [project, setProject] = useState<any>(null);\r\n  const [newColTitle, setNewColTitle] = useState(\"\");\r\n  const [newTaskTitles, setNewTaskTitles] = useState<Record<string, string>>(\r\n    {}\r\n  );\r\n  const [msg, setMsg] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (!projectId) return;\r\n      try {\r\n        const p = await getProject(projectId);\r\n        setProject(p);\r\n      } catch (err) {\r\n        setMsg(\"Failed to load project\");\r\n      }\r\n    })();\r\n  }, [projectId]);\r\n\r\n  async function addColumn(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    setMsg(null);\r\n    const title = (newColTitle || \"\").trim();\r\n    if (!title) {\r\n      setMsg(\"Column title required\");\r\n      return;\r\n    }\r\n    try {\r\n      const col = await createColumn(project.id, title);\r\n      setProject({ ...project, columns: [...(project.columns || []), col] });\r\n      setNewColTitle(\"\");\r\n    } catch (err: any) {\r\n      setMsg(err?.body?.message || \"Failed to create column\");\r\n    }\r\n  }\r\n\r\n  async function addTask(columnId: string) {\r\n    setMsg(null);\r\n    const title = (newTaskTitles[columnId] || \"\").trim();\r\n    if (!title) {\r\n      setMsg(\"Task title required\");\r\n      return;\r\n    }\r\n    try {\r\n      const t = await createTask(columnId, title);\r\n      setProject({\r\n        ...project,\r\n        columns: project.columns.map((c: any) =>\r\n          c.id === columnId ? { ...c, tasks: [...(c.tasks || []), t] } : c\r\n        ),\r\n      });\r\n      setNewTaskTitles((prev) => ({ ...prev, [columnId]: \"\" }));\r\n    } catch (err: any) {\r\n      setMsg(err?.body?.message || \"Failed to create task\");\r\n    }\r\n  }\r\n\r\n  if (!project) return <div>Loading project...</div>;\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"text-2xl font-bold mb-4\">{project.name}</h2>\r\n      {msg && <div className=\"mb-3 text-red-600\">{msg}</div>}\r\n\r\n      <div className=\"mb-4\">\r\n        <form onSubmit={addColumn} className=\"flex gap-2\">\r\n          <input\r\n            value={newColTitle}\r\n            onChange={(e) => setNewColTitle(e.target.value)}\r\n            placeholder=\"New column title\"\r\n            className=\"px-3 py-2 border rounded flex-1\"\r\n          />\r\n          <button className=\"bg-slate-600 text-white px-3 py-2 rounded\">\r\n            Add column\r\n          </button>\r\n        </form>\r\n      </div>\r\n\r\n      <div className=\"flex gap-4 overflow-auto\">\r\n        {project.columns.map((col: any) => (\r\n          <div key={col.id} className=\"bg-gray-100 p-3 rounded min-w-[250px]\">\r\n            <div className=\"font-semibold mb-2\">{col.title}</div>\r\n            <ul className=\"space-y-2\">\r\n              {col.tasks.map((t: any) => (\r\n                <li key={t.id} className=\"p-2 bg-white rounded border\">\r\n                  {t.title}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n\r\n            <div className=\"mt-3\">\r\n              <input\r\n                value={newTaskTitles[col.id] || \"\"}\r\n                onChange={(e) =>\r\n                  setNewTaskTitles((prev) => ({\r\n                    ...prev,\r\n                    [col.id]: e.target.value,\r\n                  }))\r\n                }\r\n                placeholder=\"New task title\"\r\n                className=\"w-full px-2 py-1 border rounded mb-2\"\r\n              />\r\n              <button\r\n                onClick={() => addTask(col.id)}\r\n                className=\"w-full bg-green-600 text-white py-1 rounded\"\r\n              >\r\n                Add task\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}