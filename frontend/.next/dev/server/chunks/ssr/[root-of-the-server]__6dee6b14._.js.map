{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Window/Desktop/Teamflow/frontend/src/lib/api.ts"],"sourcesContent":["// frontend/src/lib/api.ts\r\nconst BASE = process.env.NEXT_PUBLIC_API_BASE || \"http://localhost:4000\";\r\n\r\nfunction getAuthHeader(): Record<string, string> | undefined {\r\n  const token =\r\n    typeof window !== \"undefined\" ? localStorage.getItem(\"tf_access\") : null;\r\n  return token ? { Authorization: `Bearer ${token}` } : undefined;\r\n}\r\n\r\nfunction toHeadersObject(h?: HeadersInit): Record<string, string> {\r\n  const out: Record<string, string> = {};\r\n  if (!h) return out;\r\n\r\n  if (h instanceof Headers) {\r\n    h.forEach((value, key) => {\r\n      out[key] = value;\r\n    });\r\n    return out;\r\n  }\r\n\r\n  if (Array.isArray(h)) {\r\n    for (const [key, value] of h) {\r\n      out[key] = value;\r\n    }\r\n    return out;\r\n  }\r\n\r\n  // assume Record<string, string>\r\n  return { ...h };\r\n}\r\n\r\nasync function request(path: string, opts: RequestInit = {}) {\r\n  const mergedHeaders: Record<string, string> = {\r\n    \"Content-Type\": \"application/json\",\r\n    ...toHeadersObject(opts.headers),\r\n  };\r\n\r\n  const res = await fetch(`${BASE}${path}`, {\r\n    headers: mergedHeaders,\r\n    credentials: \"omit\",\r\n    ...opts,\r\n  });\r\n\r\n  const text = await res.text();\r\n  try {\r\n    const json = text ? JSON.parse(text) : null;\r\n    if (!res.ok) throw { status: res.status, body: json || text };\r\n    return json;\r\n  } catch (_err) {\r\n    if (!res.ok) throw { status: res.status, body: text };\r\n    return null;\r\n  }\r\n}\r\n\r\n/* Auth */\r\nexport async function register(body: {\r\n  email: string;\r\n  password: string;\r\n  name?: string;\r\n}) {\r\n  return request(\"/auth/register\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify(body),\r\n  });\r\n}\r\nexport async function login(body: { email: string; password: string }) {\r\n  return request(\"/auth/login\", { method: \"POST\", body: JSON.stringify(body) });\r\n}\r\nexport async function logout() {\r\n  const h = getAuthHeader();\r\n  return request(\"/auth/logout\", { method: \"POST\", headers: h });\r\n}\r\nexport async function refresh(refreshToken: string) {\r\n  return request(\"/auth/refresh\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify({ refreshToken }),\r\n  });\r\n}\r\nexport async function requestPasswordReset(email: string) {\r\n  return request(\"/auth/request-password-reset\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify({ email }),\r\n  });\r\n}\r\nexport async function resetPassword(token: string, newPassword: string) {\r\n  return request(\"/auth/reset-password\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify({ token, newPassword }),\r\n  });\r\n}\r\n\r\n/* Teams */\r\nexport async function createTeam(name: string) {\r\n  return request(\"/teams\", {\r\n    method: \"POST\",\r\n    headers: getAuthHeader(),\r\n    body: JSON.stringify({ name }),\r\n  });\r\n}\r\nexport async function getMyTeams() {\r\n  return request(\"/teams/my\", { headers: getAuthHeader() });\r\n}\r\nexport async function inviteToTeam(\r\n  teamId: string,\r\n  email: string,\r\n  role = \"member\"\r\n) {\r\n  return request(`/teams/${teamId}/invite`, {\r\n    method: \"POST\",\r\n    headers: getAuthHeader(),\r\n    body: JSON.stringify({ email, role }),\r\n  });\r\n}\r\nexport async function getTeamMembers(teamId: string) {\r\n  return request(`/teams/${teamId}/members`, { headers: getAuthHeader() });\r\n}\r\n\r\n/* Projects & Board */\r\nexport async function createProject(name: string, description?: string) {\r\n  return request(\"/projects\", {\r\n    method: \"POST\",\r\n    headers: getAuthHeader(),\r\n    body: JSON.stringify({ name, description }),\r\n  });\r\n}\r\nexport async function getProject(projectId: string) {\r\n  return request(`/projects/${projectId}`, { headers: getAuthHeader() });\r\n}\r\nexport async function createColumn(projectId: string, title: string) {\r\n  return request(`/projects/${projectId}/columns`, {\r\n    method: \"POST\",\r\n    headers: getAuthHeader(),\r\n    body: JSON.stringify({ title }),\r\n  });\r\n}\r\nexport async function createTask(\r\n  columnId: string,\r\n  title: string,\r\n  description?: string\r\n) {\r\n  return request(`/projects/columns/${columnId}/tasks`, {\r\n    method: \"POST\",\r\n    headers: getAuthHeader(),\r\n    body: JSON.stringify({ title, description }),\r\n  });\r\n}\r\nexport async function moveTask(\r\n  taskId: string,\r\n  targetColumnId: string,\r\n  targetPosition: number\r\n) {\r\n  return request(`/projects/tasks/${taskId}/move`, {\r\n    method: \"PATCH\",\r\n    headers: getAuthHeader(),\r\n    body: JSON.stringify({ targetColumnId, targetPosition }),\r\n  });\r\n}\r\nexport async function updateTask(\r\n  taskId: string,\r\n  data: Record<string, unknown>\r\n) {\r\n  return request(`/projects/tasks/${taskId}`, {\r\n    method: \"PATCH\",\r\n    headers: getAuthHeader(),\r\n    body: JSON.stringify(data),\r\n  });\r\n}\r\nexport async function deleteTask(taskId: string) {\r\n  return request(`/projects/tasks/${taskId}`, {\r\n    method: \"DELETE\",\r\n    headers: getAuthHeader(),\r\n  });\r\n}\r\n\r\nexport async function listProjects() {\r\n  return request('/projects', { headers: getAuthHeader() });\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 257, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Window/Desktop/Teamflow/frontend/src/context/AuthContext.tsx"],"sourcesContent":["\"use client\";\r\n// frontend/src/context/AuthContext.tsx\r\nimport React, { createContext, useContext, useState } from \"react\";\r\nimport * as api from \"../lib/api\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\ntype User = { id: string; email: string; name?: string; role?: string } | null;\r\n\r\ntype AuthContextType = {\r\n  user: User;\r\n  accessToken: string | null;\r\n  refreshToken: string | null;\r\n  login: (email: string, password: string) => Promise<void>;\r\n  logout: () => Promise<void>;\r\n  register: (email: string, password: string, name?: string) => Promise<void>;\r\n};\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\n// typed shape returned by your API on login\r\ntype LoginResponse = {\r\n  tokens: { accessToken: string; refreshToken: string };\r\n  user: { id: string; email: string; name?: string; role?: string };\r\n};\r\n\r\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({\r\n  children,\r\n}) => {\r\n  // lazy initializers read localStorage only once during initial render (client-side)\r\n  const [accessToken, setAccessToken] = useState<string | null>(() => {\r\n    if (typeof window === \"undefined\") return null;\r\n    return localStorage.getItem(\"tf_access\");\r\n  });\r\n\r\n  const [refreshToken, setRefreshToken] = useState<string | null>(() => {\r\n    if (typeof window === \"undefined\") return null;\r\n    return localStorage.getItem(\"tf_refresh\");\r\n  });\r\n\r\n  const [user, setUser] = useState<User>(() => {\r\n    if (typeof window === \"undefined\") return null;\r\n    const raw = localStorage.getItem(\"tf_user\");\r\n    try {\r\n      return raw ? (JSON.parse(raw) as User) : null;\r\n    } catch {\r\n      return null;\r\n    }\r\n  });\r\n\r\n  const router = useRouter();\r\n\r\n  const saveTokens = (tokens: {\r\n    accessToken: string;\r\n    refreshToken: string;\r\n  }) => {\r\n    localStorage.setItem(\"tf_access\", tokens.accessToken);\r\n    localStorage.setItem(\"tf_refresh\", tokens.refreshToken);\r\n    setAccessToken(tokens.accessToken);\r\n    setRefreshToken(tokens.refreshToken);\r\n  };\r\n\r\n  const login = async (email: string, password: string) => {\r\n    const res = (await api.login({ email, password })) as LoginResponse;\r\n    // behaviour unchanged: store tokens and user and navigate\r\n    saveTokens(res.tokens);\r\n    setUser(res.user);\r\n    localStorage.setItem(\"tf_user\", JSON.stringify(res.user));\r\n    router.push(\"/teams\");\r\n  };\r\n\r\n  const logout = async () => {\r\n    try {\r\n      await api.logout();\r\n    } catch {\r\n      /* ignore */\r\n    }\r\n    localStorage.removeItem(\"tf_access\");\r\n    localStorage.removeItem(\"tf_refresh\");\r\n    localStorage.removeItem(\"tf_user\");\r\n    setAccessToken(null);\r\n    setRefreshToken(null);\r\n    setUser(null);\r\n    router.push(\"/login\");\r\n  };\r\n\r\n  const register = async (email: string, password: string, name?: string) => {\r\n    await api.register({ email, password, name });\r\n    // after register, redirect to login\r\n    router.push(\"/login\");\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{ user, accessToken, refreshToken, login, logout, register }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport function useAuth() {\r\n  const ctx = useContext(AuthContext);\r\n  if (!ctx) throw new Error(\"useAuth must be used within AuthProvider\");\r\n  return ctx;\r\n}\r\n"],"names":[],"mappings":";;;;;;;AACA,uCAAuC;AACvC;AACA;AACA;AAJA;;;;;AAiBA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAQxD,MAAM,eAAwD,CAAC,EACpE,QAAQ,EACT;IACC,oFAAoF;IACpF,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAgB;QAC5D,wCAAmC,OAAO;;;IAE5C;IAEA,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAgB;QAC9D,wCAAmC,OAAO;;;IAE5C;IAEA,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAO;QACrC,wCAAmC,OAAO;;;QAC1C,MAAM;IAMR;IAEA,MAAM,SAAS,IAAA,+IAAS;IAExB,MAAM,aAAa,CAAC;QAIlB,aAAa,OAAO,CAAC,aAAa,OAAO,WAAW;QACpD,aAAa,OAAO,CAAC,cAAc,OAAO,YAAY;QACtD,eAAe,OAAO,WAAW;QACjC,gBAAgB,OAAO,YAAY;IACrC;IAEA,MAAM,QAAQ,OAAO,OAAe;QAClC,MAAM,MAAO,MAAM,0HAAS,CAAC;YAAE;YAAO;QAAS;QAC/C,0DAA0D;QAC1D,WAAW,IAAI,MAAM;QACrB,QAAQ,IAAI,IAAI;QAChB,aAAa,OAAO,CAAC,WAAW,KAAK,SAAS,CAAC,IAAI,IAAI;QACvD,OAAO,IAAI,CAAC;IACd;IAEA,MAAM,SAAS;QACb,IAAI;YACF,MAAM,2HAAU;QAClB,EAAE,OAAM;QACN,UAAU,GACZ;QACA,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,eAAe;QACf,gBAAgB;QAChB,QAAQ;QACR,OAAO,IAAI,CAAC;IACd;IAEA,MAAM,WAAW,OAAO,OAAe,UAAkB;QACvD,MAAM,6HAAY,CAAC;YAAE;YAAO;YAAU;QAAK;QAC3C,oCAAoC;QACpC,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,8OAAC,YAAY,QAAQ;QACnB,OAAO;YAAE;YAAM;YAAa;YAAc;YAAO;YAAQ;QAAS;kBAEjE;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,MAAM,IAAA,mNAAU,EAAC;IACvB,IAAI,CAAC,KAAK,MAAM,IAAI,MAAM;IAC1B,OAAO;AACT","debugId":null}},
    {"offset": {"line": 357, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Window/Desktop/Teamflow/frontend/src/components/TopNav.tsx"],"sourcesContent":["// frontend/src/components/TopNav.tsx\r\n'use client';\r\nimport React from 'react';\r\nimport Link from 'next/link';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nexport default function TopNav() {\r\n  const { user, logout } = useAuth();\r\n\r\n  return (\r\n    <header className=\"bg-white border-b\">\r\n      <div className=\"max-w-6xl mx-auto px-4 py-3 flex justify-between items-center\">\r\n        <Link href=\"/\" className=\"font-bold text-lg\">Teamflow</Link>\r\n        <nav className=\"space-x-3\">\r\n          <Link href=\"/teams\" className=\"text-sm\">Teams</Link>\r\n          <Link href=\"/projects\" className=\"text-sm\">Projects</Link>\r\n\r\n          {user ? (\r\n            <>\r\n              <span className=\"text-sm mr-3\">{user.email}</span>\r\n              <button onClick={() => logout()} className=\"text-sm bg-red-500 text-white px-3 py-1 rounded\">Logout</button>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Link href=\"/login\" className=\"text-sm\">Login</Link>\r\n              <Link href=\"/register\" className=\"text-sm ml-2\">Register</Link>\r\n            </>\r\n          )}\r\n        </nav>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,qCAAqC;;;;;;AAGrC;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,IAAA,yIAAO;IAEhC,qBACE,8OAAC;QAAO,WAAU;kBAChB,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC,uKAAI;oBAAC,MAAK;oBAAI,WAAU;8BAAoB;;;;;;8BAC7C,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,uKAAI;4BAAC,MAAK;4BAAS,WAAU;sCAAU;;;;;;sCACxC,8OAAC,uKAAI;4BAAC,MAAK;4BAAY,WAAU;sCAAU;;;;;;wBAE1C,qBACC;;8CACE,8OAAC;oCAAK,WAAU;8CAAgB,KAAK,KAAK;;;;;;8CAC1C,8OAAC;oCAAO,SAAS,IAAM;oCAAU,WAAU;8CAAkD;;;;;;;yDAG/F;;8CACE,8OAAC,uKAAI;oCAAC,MAAK;oCAAS,WAAU;8CAAU;;;;;;8CACxC,8OAAC,uKAAI;oCAAC,MAAK;oCAAY,WAAU;8CAAe;;;;;;;;;;;;;;;;;;;;;;;;;AAO9D","debugId":null}},
    {"offset": {"line": 470, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Window/Desktop/Teamflow/frontend/src/components/ClientRoot.tsx"],"sourcesContent":["// frontend/src/components/ClientRoot.tsx\r\n'use client';\r\nimport React from 'react';\r\nimport { AuthProvider } from '../context/AuthContext';\r\nimport TopNav from './TopNav';\r\n\r\nexport default function ClientRoot({ children }: { children: React.ReactNode }) {\r\n  return (\r\n    <AuthProvider>\r\n      <TopNav />\r\n      {children}\r\n    </AuthProvider>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,yCAAyC;;;;;;AAGzC;AACA;AAHA;;;;AAKe,SAAS,WAAW,EAAE,QAAQ,EAAiC;IAC5E,qBACE,8OAAC,8IAAY;;0BACX,8OAAC,uIAAM;;;;;YACN;;;;;;;AAGP","debugId":null}}]
}