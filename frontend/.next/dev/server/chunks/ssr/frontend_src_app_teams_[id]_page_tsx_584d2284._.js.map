{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Window/Desktop/Teamflow/frontend/src/app/teams/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n// frontend/src/app/teams/[id]/page.tsx\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { useAuth } from \"../../../context/AuthContext\";\r\nimport {\r\n  getTeamDetails as apiGetTeamDetails,\r\n  getProject,\r\n} from \"../../../lib/api\";\r\n\r\ntype UserBase = {\r\n  id: string;\r\n  email: string;\r\n  name?: string | null;\r\n  _count?: { teamMembers?: number };\r\n  teamIds?: string[];\r\n};\r\ntype TeamMember = {\r\n  id: string;\r\n  role: \"owner\" | \"admin\" | \"member\" | string;\r\n  user: UserBase;\r\n};\r\ntype ProjectShort = {\r\n  id: string;\r\n  name?: string;\r\n  description?: string;\r\n  columns?: any[];\r\n  tasks?: any[];\r\n};\r\n\r\ntype Team = {\r\n  id: string;\r\n  name: string;\r\n  ownerId?: string | null;\r\n  members?: TeamMember[];\r\n  projects?: ProjectShort[];\r\n};\r\n\r\nconst API_BASE = process.env.NEXT_PUBLIC_API_BASE ?? \"http://localhost:4000\";\r\n\r\nexport default function TeamPage() {\r\n  const params = useParams();\r\n  const router = useRouter();\r\n  const teamId = Array.isArray(params?.id) ? params.id[0] : params?.id;\r\n  const { user } = useAuth();\r\n\r\n  const [team, setTeam] = useState<Team | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [msg, setMsg] = useState<string | null>(null);\r\n\r\n  const [inviteEmail, setInviteEmail] = useState<string>(\"\");\r\n  const [inviteRole, setInviteRole] = useState<\"member\" | \"admin\" | \"owner\">(\r\n    \"member\"\r\n  );\r\n  const [usersList, setUsersList] = useState<UserBase[] | null>(null);\r\n  const [selectedUserId, setSelectedUserId] = useState<string | null>(null);\r\n\r\n  const [processingMemberId, setProcessingMemberId] = useState<string | null>(\r\n    null\r\n  );\r\n  const [deleting, setDeleting] = useState(false);\r\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\r\n  const [deleteNameInput, setDeleteNameInput] = useState(\"\");\r\n\r\n  if (!teamId) return <div>Invalid team id</div>;\r\n\r\n  function authHeaders() {\r\n    const t =\r\n      typeof window !== \"undefined\" ? localStorage.getItem(\"tf_access\") : null;\r\n    return {\r\n      \"Content-Type\": \"application/json\",\r\n      ...(t ? { Authorization: `Bearer ${t}` } : {}),\r\n    };\r\n  }\r\n\r\n  async function loadTeam() {\r\n    setMsg(null);\r\n    setLoading(true);\r\n    try {\r\n      const data = await apiGetTeamDetails(String(teamId));\r\n      setTeam(data as Team);\r\n\r\n      const projs = (data as any)?.projects;\r\n      if (Array.isArray(projs) && projs.length > 0) {\r\n        try {\r\n          const detailed = await Promise.all(\r\n            projs.map(async (p: any) => {\r\n              if (!p?.id) return p;\r\n              try {\r\n                const full = await getProject(p.id);\r\n                return full;\r\n              } catch {\r\n                return p;\r\n              }\r\n            })\r\n          );\r\n          setTeam((prev) => ({ ...(prev || {}), projects: detailed }));\r\n        } catch {\r\n          // ignore\r\n        }\r\n      }\r\n    } catch (err: unknown) {\r\n      const e = err as { status?: number; body?: any } | Error;\r\n      setMsg(\r\n        (e as any)?.body?.message ||\r\n          (e as Error).message ||\r\n          \"Failed to load team\"\r\n      );\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    loadTeam();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [teamId]);\r\n\r\n  // admin users list (only if global admin)\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async () => {\r\n      setUsersList(null);\r\n      if (!user?.role || user.role !== \"admin\") return;\r\n      try {\r\n        const res = await fetch(`${API_BASE}/admin/users`, {\r\n          headers: authHeaders(),\r\n        });\r\n        if (!mounted) return;\r\n        if (!res.ok) {\r\n          setUsersList(null);\r\n          return;\r\n        }\r\n        const json = await res.json();\r\n        let arr: UserBase[] = [];\r\n        if (Array.isArray(json)) arr = json as UserBase[];\r\n        else if (Array.isArray(json.users)) arr = json.users;\r\n        else if (Array.isArray(json.data)) arr = json.data;\r\n        else arr = json as UserBase[];\r\n        if (mounted) setUsersList(arr);\r\n      } catch {\r\n        if (mounted) setUsersList(null);\r\n      }\r\n    })();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [user?.role]);\r\n\r\n  const myUserId = user?.id ?? null;\r\n  const myMembership = team?.members?.find((m) => m.user?.id === myUserId);\r\n  const myRoleInTeam = myMembership?.role ?? null;\r\n  const canManage =\r\n    user?.role === \"admin\" ||\r\n    myRoleInTeam === \"owner\" ||\r\n    myRoleInTeam === \"admin\";\r\n\r\n  const ownerName = useMemo(() => {\r\n    const owner = team?.members?.find((m) => m.role === \"owner\");\r\n    return owner?.user?.name ?? owner?.user?.email ?? team?.ownerId ?? \"—\";\r\n  }, [team]);\r\n\r\n  // collect all tasks across team's projects\r\n  const allProjectTasks = useMemo(() => {\r\n    const tasks: any[] = [];\r\n    (team?.projects || []).forEach((p: any) => {\r\n      if (Array.isArray(p.tasks) && p.tasks.length)\r\n        tasks.push(\r\n          ...p.tasks.map((t: any) => ({\r\n            ...t,\r\n            projectId: p.id,\r\n            projectName: p.name,\r\n          }))\r\n        );\r\n      else if (Array.isArray(p.columns)) {\r\n        p.columns.forEach((c: any) => {\r\n          if (Array.isArray(c.tasks))\r\n            tasks.push(\r\n              ...c.tasks.map((t: any) => ({\r\n                ...t,\r\n                projectId: p.id,\r\n                projectName: p.name,\r\n              }))\r\n            );\r\n        });\r\n      }\r\n    });\r\n    return tasks;\r\n  }, [team]);\r\n\r\n  // map userId => tasks array\r\n  const memberTaskMap = useMemo(() => {\r\n    const map = new Map<string, any[]>();\r\n    (team?.members || []).forEach((m) => map.set(m.user.id, []));\r\n    allProjectTasks.forEach((t) => {\r\n      const aId = t.assigneeId ?? t.assignee?.id;\r\n      if (aId && map.has(aId)) {\r\n        map.get(aId)!.push(t);\r\n      }\r\n    });\r\n    return map;\r\n  }, [team, allProjectTasks]);\r\n\r\n  const totalMembers = team?.members?.length ?? 0;\r\n  const totalProjects = team?.projects?.length ?? 0;\r\n  const totalTasks = allProjectTasks.length;\r\n  const availableMembers =\r\n    team?.members?.filter(\r\n      (m) => (memberTaskMap.get(m.user.id) || []).length === 0\r\n    ).length ?? 0;\r\n\r\n  async function handleInvite(e?: React.FormEvent) {\r\n    e?.preventDefault();\r\n    setMsg(null);\r\n    if (!canManage) {\r\n      setMsg(\"Not permitted\");\r\n      return;\r\n    }\r\n    setProcessingMemberId(\"invite\");\r\n    try {\r\n      let body: { email: string; role: string };\r\n      if (selectedUserId && usersList) {\r\n        const u = usersList.find((x) => x.id === selectedUserId);\r\n        if (!u) throw new Error(\"Selected user not found\");\r\n        body = { email: u.email, role: inviteRole };\r\n      } else {\r\n        if (!inviteEmail) {\r\n          setMsg(\"Enter email or select a user\");\r\n          setProcessingMemberId(null);\r\n          return;\r\n        }\r\n        body = { email: inviteEmail, role: inviteRole };\r\n      }\r\n\r\n      const r = await fetch(`${API_BASE}/teams/${teamId}/invite`, {\r\n        method: \"POST\",\r\n        headers: authHeaders(),\r\n        body: JSON.stringify(body),\r\n      });\r\n      if (!r.ok) {\r\n        const txt = await r.text().catch(() => \"\");\r\n        const parsed = (() => {\r\n          try {\r\n            return JSON.parse(txt);\r\n          } catch {\r\n            return null;\r\n          }\r\n        })();\r\n        const message =\r\n          parsed?.message ||\r\n          parsed?.error ||\r\n          txt ||\r\n          `Invite failed (${r.status})`;\r\n        setMsg(message);\r\n        setProcessingMemberId(null);\r\n        return;\r\n      }\r\n\r\n      setInviteEmail(\"\");\r\n      setSelectedUserId(null);\r\n      setInviteRole(\"member\");\r\n      await loadTeam();\r\n      setMsg(\"Invitation/added successfully.\");\r\n    } catch (err: unknown) {\r\n      setMsg((err as Error).message || \"Network error\");\r\n    } finally {\r\n      setProcessingMemberId(null);\r\n    }\r\n  }\r\n\r\n  async function changeMemberRole(memberId: string, newRole: string) {\r\n    if (!canManage) {\r\n      setMsg(\"Not permitted\");\r\n      return;\r\n    }\r\n    setProcessingMemberId(memberId);\r\n    try {\r\n      const r = await fetch(\r\n        `${API_BASE}/teams/${teamId}/members/${memberId}/role`,\r\n        {\r\n          method: \"PATCH\",\r\n          headers: authHeaders(),\r\n          body: JSON.stringify({ role: newRole }),\r\n        }\r\n      );\r\n      if (!r.ok) {\r\n        const txt = await r.text().catch(() => \"\");\r\n        throw new Error(txt || `Failed (${r.status})`);\r\n      }\r\n      await loadTeam();\r\n      setMsg(\"Role updated.\");\r\n    } catch (err: unknown) {\r\n      setMsg((err as Error).message || \"Failed to update role\");\r\n    } finally {\r\n      setProcessingMemberId(null);\r\n    }\r\n  }\r\n\r\n  async function demoteMember(member: TeamMember) {\r\n    const mapping: Record<string, string | null> = {\r\n      owner: \"admin\",\r\n      admin: \"member\",\r\n      member: null,\r\n    };\r\n    const next = mapping[member.role] ?? \"member\";\r\n    if (!next) {\r\n      setMsg(\"Cannot demote further\");\r\n      return;\r\n    }\r\n    await changeMemberRole(member.id, next);\r\n  }\r\n\r\n  async function removeMember(memberId: string) {\r\n    if (!canManage) {\r\n      setMsg(\"Not permitted\");\r\n      return;\r\n    }\r\n    if (!confirm(\"Remove this member from the team?\")) return;\r\n    setProcessingMemberId(memberId);\r\n    try {\r\n      const r = await fetch(`${API_BASE}/teams/${teamId}/members/${memberId}`, {\r\n        method: \"DELETE\",\r\n        headers: authHeaders(),\r\n      });\r\n      if (!r.ok) {\r\n        const txt = await r.text().catch(() => \"\");\r\n        throw new Error(txt || `Failed (${r.status})`);\r\n      }\r\n      await loadTeam();\r\n      setMsg(\"Member removed.\");\r\n    } catch (err: unknown) {\r\n      setMsg((err as Error).message || \"Failed to remove\");\r\n    } finally {\r\n      setProcessingMemberId(null);\r\n    }\r\n  }\r\n\r\n  function openDeleteForm() {\r\n    setDeleteNameInput(\"\");\r\n    setShowDeleteConfirm(true);\r\n    setMsg(null);\r\n  }\r\n\r\n  async function performDeleteTeam() {\r\n    if (!team) return;\r\n    if (deleteNameInput !== team.name) {\r\n      setMsg(\"Typed name does not match exactly.\");\r\n      return;\r\n    }\r\n    setDeleting(true);\r\n    try {\r\n      const r = await fetch(`${API_BASE}/teams/${teamId}`, {\r\n        method: \"DELETE\",\r\n        headers: authHeaders(),\r\n      });\r\n      if (!r.ok) {\r\n        const txt = await r.text().catch(() => \"\");\r\n        throw new Error(txt || `Delete failed (${r.status})`);\r\n      }\r\n      router.push(\"/teams\");\r\n    } catch (err: unknown) {\r\n      setMsg((err as Error).message || \"Failed to delete team\");\r\n    } finally {\r\n      setDeleting(false);\r\n      setShowDeleteConfirm(false);\r\n    }\r\n  }\r\n\r\n  function userIsInOtherTeam(u: UserBase) {\r\n    const count =\r\n      typeof u._count?.teamMembers === \"number\"\r\n        ? u._count!.teamMembers\r\n        : undefined;\r\n    const teamIds = Array.isArray((u as any).teamIds)\r\n      ? ((u as any).teamIds as string[])\r\n      : undefined;\r\n    const alreadyInThis = team?.members?.some((m) => m.user?.id === u.id);\r\n    if (typeof count === \"number\") return count > 0 && !alreadyInThis;\r\n    if (Array.isArray(teamIds)) return teamIds.length > 0 && !alreadyInThis;\r\n    return false;\r\n  }\r\n\r\n  function computeProgressForTasks(tasks: any[]) {\r\n    if (!tasks || tasks.length === 0) return { percent: 0, total: 0, done: 0 };\r\n    const total = tasks.length;\r\n    const done = tasks.filter(\r\n      (t) => String(t.status || \"\").toUpperCase() === \"FINISHED\"\r\n    ).length;\r\n    const percent = Math.round((done / total) * 100);\r\n    return { percent, total, done };\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {loading && <div className=\"text-sm text-gray-600\">Loading team...</div>}\r\n      {msg && <div className=\"text-sm text-red-600\">{msg}</div>}\r\n\r\n      {!loading && team && (\r\n        <>\r\n          <header className=\"bg-white rounded shadow p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-3\">\r\n            <div>\r\n              <h2 className=\"text-2xl font-bold\">{team.name}</h2>\r\n              <div className=\"text-sm text-gray-600 mt-1\">\r\n                Owner: <span className=\"font-medium\">{ownerName}</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex gap-3\">\r\n              <div className=\"bg-gray-50 p-3 rounded text-center min-w-[110px]\">\r\n                <div className=\"text-xs text-gray-500\">Members</div>\r\n                <div className=\"text-lg font-semibold\">{totalMembers}</div>\r\n              </div>\r\n              <div className=\"bg-gray-50 p-3 rounded text-center min-w-[110px]\">\r\n                <div className=\"text-xs text-gray-500\">Projects</div>\r\n                <div className=\"text-lg font-semibold\">{totalProjects}</div>\r\n              </div>\r\n              <div className=\"bg-gray-50 p-3 rounded text-center min-w-[140px]\">\r\n                <div className=\"text-xs text-gray-500\">Tasks (team)</div>\r\n                <div className=\"text-lg font-semibold\">{totalTasks}</div>\r\n                <div className=\"text-xs text-gray-400 mt-1\">\r\n                  Available: {String(availableMembers)}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </header>\r\n\r\n          {/* Manage / invite */}\r\n          {canManage && (\r\n            <section className=\"bg-white p-4 rounded shadow\">\r\n              <h3 className=\"font-semibold mb-3\">Add / invite member</h3>\r\n\r\n              {usersList ? (\r\n                <div className=\"flex gap-2 flex-wrap items-center\">\r\n                  <select\r\n                    value={selectedUserId ?? \"\"}\r\n                    onChange={(e) => setSelectedUserId(e.target.value || null)}\r\n                    className=\"px-3 py-2 border rounded min-w-[280px]\"\r\n                  >\r\n                    <option value=\"\">\r\n                      -- Select a user (or leave blank to enter email) --\r\n                    </option>\r\n                    {usersList\r\n                      .filter((u) => u.id !== myUserId)\r\n                      .map((u) => {\r\n                        const inOther = userIsInOtherTeam(u);\r\n                        const disabled = team.members?.some(\r\n                          (m) => m.user?.id === u.id\r\n                        );\r\n                        return (\r\n                          <option\r\n                            key={u.id}\r\n                            value={u.id}\r\n                            disabled={disabled}\r\n                            style={{\r\n                              backgroundColor: disabled\r\n                                ? \"#f0f0f0\"\r\n                                : inOther\r\n                                ? \"#fff0f0\"\r\n                                : undefined,\r\n                              color: inOther ? \"#900\" : undefined,\r\n                            }}\r\n                          >\r\n                            {u.name ? `${u.name} — ${u.email}` : u.email}\r\n                            {disabled\r\n                              ? \" (already in this team)\"\r\n                              : inOther\r\n                              ? \" (in other team)\"\r\n                              : \"\"}\r\n                          </option>\r\n                        );\r\n                      })}\r\n                  </select>\r\n\r\n                  <input\r\n                    value={inviteEmail}\r\n                    onChange={(e) => setInviteEmail(e.target.value)}\r\n                    placeholder=\"Or enter email manually\"\r\n                    className=\"px-3 py-2 border rounded flex-1 min-w-[220px]\"\r\n                  />\r\n\r\n                  <select\r\n                    value={inviteRole}\r\n                    onChange={(e) => setInviteRole(e.target.value as any)}\r\n                    className=\"px-2 py-2 border rounded\"\r\n                  >\r\n                    <option value=\"member\">Member</option>\r\n                    <option value=\"admin\">Admin</option>\r\n                    <option value=\"owner\">Owner</option>\r\n                  </select>\r\n\r\n                  <button\r\n                    className=\"bg-green-600 text-white px-3 py-2 rounded\"\r\n                    onClick={(e) => handleInvite(e)}\r\n                    disabled={\r\n                      !!processingMemberId && processingMemberId !== \"invite\"\r\n                    }\r\n                  >\r\n                    {processingMemberId === \"invite\"\r\n                      ? \"Working…\"\r\n                      : \"Add / Invite\"}\r\n                  </button>\r\n                </div>\r\n              ) : (\r\n                <form\r\n                  onSubmit={handleInvite}\r\n                  className=\"flex gap-2 flex-wrap items-center\"\r\n                >\r\n                  <input\r\n                    value={inviteEmail}\r\n                    onChange={(e) => setInviteEmail(e.target.value)}\r\n                    placeholder=\"Email to invite\"\r\n                    className=\"px-3 py-2 border rounded\"\r\n                  />\r\n                  <select\r\n                    value={inviteRole}\r\n                    onChange={(e) => setInviteRole(e.target.value as any)}\r\n                    className=\"px-2 py-2 border rounded\"\r\n                  >\r\n                    <option value=\"member\">Member</option>\r\n                    <option value=\"admin\">Admin</option>\r\n                    <option value=\"owner\">Owner</option>\r\n                  </select>\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"bg-green-600 text-white px-3 py-2 rounded\"\r\n                  >\r\n                    Invite\r\n                  </button>\r\n                </form>\r\n              )}\r\n            </section>\r\n          )}\r\n\r\n          {/* Members & workload (including per-member task list) */}\r\n          <section className=\"bg-white p-4 rounded shadow\">\r\n            <h3 className=\"text-lg font-semibold mb-3\">Members & workload</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n              {(team.members || []).map((m) => {\r\n                const tasksForMember = memberTaskMap.get(m.user.id) || [];\r\n                const prog = computeProgressForTasks(tasksForMember);\r\n                const available = tasksForMember.length === 0;\r\n\r\n                const showPromote = m.role === \"member\" || m.role === \"admin\";\r\n                const showDemote = m.role === \"owner\" || m.role === \"admin\";\r\n                const promoteLabel =\r\n                  m.role === \"member\"\r\n                    ? \"Promote\"\r\n                    : m.role === \"admin\"\r\n                    ? \"Make owner\"\r\n                    : \"Promote\";\r\n\r\n                return (\r\n                  <div\r\n                    key={m.id}\r\n                    className=\"p-3 border rounded flex flex-col md:flex-row md:items-start md:justify-between gap-3\"\r\n                  >\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      {/* top row: name + email (left), role (right) */}\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div className=\"min-w-0\">\r\n                          <div className=\"flex items-baseline gap-3\">\r\n                            <div className=\"font-semibold truncate\">\r\n                              {m.user?.name ?? m.user?.email}\r\n                            </div>\r\n                            <div className=\"text-sm text-gray-500 truncate\">\r\n                              ({m.user?.email})\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"text-right ml-4 flex items-center gap-2\">\r\n                          <div className=\" font-bold mr-2\">\r\n                            Role\r\n                          </div>\r\n                          <div className=\"text-sm text-gray-500 truncate mr-10\">\r\n                            {m.role}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* tasks list */}\r\n                      <div className=\"mt-3\">\r\n                        <div className=\"text-xs text-gray-500\">\r\n                          Tasks assigned ({tasksForMember.length})\r\n                        </div>\r\n                        {tasksForMember.length === 0 ? (\r\n                          <div className=\"text-sm text-gray-500 mt-1\">\r\n                            No tasks\r\n                          </div>\r\n                        ) : (\r\n                          <ul className=\"mt-2 space-y-1\">\r\n                            {tasksForMember.map((t: any) => (\r\n                              <li key={t.id} className=\"text-sm text-slate-700\">\r\n                                <span className=\"font-medium\">\r\n                                  {t.projectName ?? t.projectId}\r\n                                </span>\r\n                                <span className=\"mx-2 text-gray-400\">—</span>\r\n                                <span>{t.title ?? \"Untitled task\"}</span>\r\n                                <span className=\"ml-2 text-xs text-gray-400\">\r\n                                  ({String(t.status || \"TODO\")})\r\n                                </span>\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* actions (right column) */}\r\n                    <div className=\"md:w-56 flex flex-col items-end gap-3\">\r\n                      <div className=\"flex gap-2\">\r\n                        {canManage ? (\r\n                          <>\r\n                            {showPromote && (\r\n                              <button\r\n                                className=\"px-2 py-1 border rounded text-sm min-w-24 text-center\"\r\n                                onClick={() => {\r\n                                  const next =\r\n                                    m.role === \"member\"\r\n                                      ? \"admin\"\r\n                                      : m.role === \"admin\"\r\n                                      ? \"owner\"\r\n                                      : undefined;\r\n                                  if (!next) return;\r\n                                  changeMemberRole(m.id, next);\r\n                                }}\r\n                                disabled={!!processingMemberId}\r\n                              >\r\n                                {processingMemberId === m.id\r\n                                  ? \"…\"\r\n                                  : promoteLabel}\r\n                              </button>\r\n                            )}\r\n\r\n                            {showDemote && (\r\n                              <button\r\n                                className=\"px-2 py-1 border rounded text-sm\"\r\n                                onClick={() => demoteMember(m)}\r\n                                disabled={!!processingMemberId}\r\n                              >\r\n                                {processingMemberId === m.id ? \"…\" : \"Demote\"}\r\n                              </button>\r\n                            )}\r\n\r\n                            <button\r\n                              className=\"px-2 py-1 bg-red-600 text-white rounded text-sm\"\r\n                              onClick={() => {\r\n                                if (m.user.id === myUserId) {\r\n                                  alert(\"You cannot remove yourself.\");\r\n                                  return;\r\n                                }\r\n                                removeMember(m.id);\r\n                              }}\r\n                              disabled={\r\n                                !!processingMemberId || m.user.id === myUserId\r\n                              }\r\n                            >\r\n                              {processingMemberId === m.id ? \"…\" : \"Remove\"}\r\n                            </button>\r\n                          </>\r\n                        ) : (\r\n                          <div className=\"text-sm text-gray-500\">View only</div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n\r\n              {(!team.members || team.members.length === 0) && (\r\n                <div className=\"text-sm text-gray-500\">No members yet</div>\r\n              )}\r\n            </div>\r\n          </section>\r\n\r\n          {/* Projects assigned */}\r\n          <section className=\"bg-white p-4 rounded shadow\">\r\n            <h3 className=\"text-lg font-semibold mb-3\">Projects assigned</h3>\r\n            <div className=\"space-y-3\">\r\n              {(team.projects || []).map((p: any) => {\r\n                let projTasks: any[] = [];\r\n                if (Array.isArray(p.tasks) && p.tasks.length)\r\n                  projTasks = p.tasks;\r\n                else if (Array.isArray(p.columns)) {\r\n                  p.columns.forEach((c: any) => {\r\n                    if (Array.isArray(c.tasks)) projTasks.push(...c.tasks);\r\n                  });\r\n                }\r\n                const summary = computeProgressForTasks(projTasks);\r\n                return (\r\n                  <div\r\n                    key={p.id}\r\n                    className=\"p-3 border rounded flex items-center justify-between\"\r\n                  >\r\n                    <div>\r\n                      <div className=\"font-semibold\">{p.name ?? \"—\"}</div>\r\n                      <div className=\"text-sm text-gray-500\">\r\n                        {p.description}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"text-right\">\r\n                      <div className=\"text-sm text-gray-500\">\r\n                        Tasks: {projTasks.length}\r\n                      </div>\r\n                      <div className=\"text-sm font-medium\">\r\n                        {summary.percent}% done\r\n                      </div>\r\n                      <div className=\"mt-2\">\r\n                        <Link\r\n                          href={`/projects/${p.id}`}\r\n                          className=\"text-indigo-600 text-sm\"\r\n                        >\r\n                          Open\r\n                        </Link>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n\r\n              {(team.projects || []).length === 0 && (\r\n                <div className=\"text-sm text-gray-500\">\r\n                  No projects assigned\r\n                </div>\r\n              )}\r\n            </div>\r\n          </section>\r\n\r\n          {/* delete team */}\r\n          {(user?.role === \"admin\" || myRoleInTeam === \"owner\") && (\r\n            <section className=\"mt-4\">\r\n              {!showDeleteConfirm ? (\r\n                <button\r\n                  className=\"bg-red-700 text-white px-3 py-2 rounded\"\r\n                  onClick={openDeleteForm}\r\n                  disabled={deleting || processingMemberId === \"delete-team\"}\r\n                >\r\n                  Delete team\r\n                </button>\r\n              ) : (\r\n                <div className=\"p-4 border rounded bg-yellow-50 max-w-xl\">\r\n                  <div className=\"mb-2\">\r\n                    <strong>Type the team name to confirm deletion:</strong>\r\n                  </div>\r\n                  <div className=\"mb-2\">\r\n                    This will permanently delete the team{\" \"}\r\n                    <strong>{team.name}</strong> and{\" \"}\r\n                    <strong>also delete projects assigned to this team</strong>.\r\n                  </div>\r\n\r\n                  <input\r\n                    value={deleteNameInput}\r\n                    onChange={(e) => setDeleteNameInput(e.target.value)}\r\n                    placeholder=\"Type exact team name\"\r\n                    className=\"px-3 py-2 border rounded w-full mb-3\"\r\n                  />\r\n\r\n                  <div className=\"flex gap-2\">\r\n                    <button\r\n                      className=\"bg-red-700 text-white px-3 py-2 rounded\"\r\n                      onClick={() => performDeleteTeam()}\r\n                      disabled={deleting || deleteNameInput !== team.name}\r\n                    >\r\n                      {deleting ? \"Deleting…\" : \"Delete\"}\r\n                    </button>\r\n                    <button\r\n                      className=\"px-3 py-2 border rounded\"\r\n                      onClick={() => {\r\n                        setShowDeleteConfirm(false);\r\n                        setDeleteNameInput(\"\");\r\n                      }}\r\n                      disabled={deleting}\r\n                    >\r\n                      Cancel\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </section>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}