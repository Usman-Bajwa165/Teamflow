{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Window/Desktop/Teamflow/frontend/src/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport {\r\n  listProjects,\r\n  getMyTeams,\r\n  getAllTeams,\r\n  getAllUsers,\r\n} from \"../../lib/api\";\r\nimport { useAuth } from \"../../context/AuthContext\";\r\n\r\ntype Project = any;\r\ntype Team = any;\r\ntype User = any;\r\n\r\nfunction niceDate(d?: string | null) {\r\n  if (!d) return \"—\";\r\n  try {\r\n    const dt = new Date(d);\r\n    return dt.toLocaleDateString();\r\n  } catch {\r\n    return d;\r\n  }\r\n}\r\n\r\nfunction timeLeftText(d?: string | null) {\r\n  if (!d) return \"No due date\";\r\n  const now = Date.now();\r\n  const due = new Date(d).getTime();\r\n  const diff = due - now;\r\n  if (diff <= 0) return \"Past due\";\r\n  const days = Math.floor(diff / (1000 * 60 * 60 * 24));\r\n  const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\r\n  if (days > 0) return `${days}d ${hours}h left`;\r\n  const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\r\n  if (hours > 0) return `${hours}h ${mins}m left`;\r\n  return `${mins}m left`;\r\n}\r\n// frontend/src/lib/format.ts\r\nexport function formatDateShort(dateStr?: string | null) {\r\n  if (!dateStr) return \"—\";\r\n  try {\r\n    const d = new Date(dateStr);\r\n    return new Intl.DateTimeFormat(\"en-GB\", {\r\n      day: \"2-digit\",\r\n      month: \"short\",\r\n      year: \"numeric\",\r\n    }).format(d);\r\n  } catch {\r\n    return dateStr;\r\n  }\r\n}\r\n\r\nexport default function DashboardPage() {\r\n  const router = useRouter();\r\n  const { user } = useAuth();\r\n  const [loading, setLoading] = useState(true);\r\n  const [projects, setProjects] = useState<Project[]>([]);\r\n  const [teams, setTeams] = useState<Team[]>([]);\r\n  const [users, setUsers] = useState<User[]>([]);\r\n  const [err, setErr] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    setLoading(true);\r\n    setErr(null);\r\n\r\n    (async () => {\r\n      try {\r\n        const p = await listProjects(); // returns projects with columns/tasks\r\n        if (!mounted) return;\r\n        setProjects(Array.isArray(p) ? p : []);\r\n\r\n        // teams: admin -> all, otherwise only my teams\r\n        if (user?.role === \"admin\") {\r\n          try {\r\n            const t = await getAllTeams();\r\n            if (mounted) setTeams(Array.isArray(t) ? t : []);\r\n          } catch {\r\n            const t2 = await getMyTeams();\r\n            if (mounted) setTeams(Array.isArray(t2) ? t2 : []);\r\n          }\r\n        } else {\r\n          const t = await getMyTeams();\r\n          if (mounted) setTeams(Array.isArray(t) ? t : []);\r\n        }\r\n\r\n        // users: only for admin (graceful fallback)\r\n        if (user?.role === \"admin\") {\r\n          try {\r\n            const u = await getAllUsers();\r\n            if (mounted) setUsers(Array.isArray(u) ? u : []);\r\n          } catch {\r\n            if (mounted) setUsers([]);\r\n          }\r\n        } else {\r\n          if (mounted) setUsers([]);\r\n        }\r\n      } catch (e: any) {\r\n        if (mounted) setErr(\"Failed to load dashboard data\");\r\n      } finally {\r\n        if (mounted) setLoading(false);\r\n      }\r\n    })();\r\n\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [user]);\r\n\r\n  // derived metrics\r\n  const totals = useMemo(() => {\r\n    const totalProjects = projects.length;\r\n    let totalTasks = 0;\r\n    const statusCounts: Record<string, number> = {\r\n      TODO: 0,\r\n      IN_PROGRESS: 0,\r\n      FINISHED: 0,\r\n    };\r\n    for (const p of projects) {\r\n      const cols = p.columns ?? [];\r\n      for (const c of cols) {\r\n        const tasks = c.tasks ?? [];\r\n        totalTasks += tasks.length;\r\n        for (const t of tasks) {\r\n          const s = (t.status ?? \"TODO\").toString();\r\n          statusCounts[s] = (statusCounts[s] || 0) + 1;\r\n        }\r\n      }\r\n    }\r\n    const totalTeams = teams.length;\r\n    const totalUsers = users.length;\r\n\r\n    // upcoming due projects sorted soonest first\r\n    const withDue = projects\r\n      .map((pr) => ({\r\n        ...pr,\r\n        dueAt: pr.dueDate ? new Date(pr.dueDate).getTime() : null,\r\n      }))\r\n      .filter((pr) => pr.dueAt)\r\n      .sort((a, b) => a.dueAt! - b.dueAt!);\r\n\r\n    // projects per team\r\n    const perTeam: Record<string, Project[]> = {};\r\n    for (const pr of projects) {\r\n      const t = pr.team?.id ?? pr.teamId ?? \"Unassigned\";\r\n      perTeam[t] = perTeam[t] || [];\r\n      perTeam[t].push(pr);\r\n    }\r\n\r\n    return {\r\n      totalProjects,\r\n      totalTasks,\r\n      statusCounts,\r\n      totalTeams,\r\n      totalUsers,\r\n      upcoming: withDue,\r\n      perTeam,\r\n    };\r\n  }, [projects, teams, users]);\r\n\r\n  // visual helpers\r\n  function pct(part: number, total: number) {\r\n    if (total === 0) return 0;\r\n    return Math.round((part / total) * 100);\r\n  }\r\n\r\n  // redirect guard: if not logged in, send to login\r\n  useEffect(() => {\r\n    if (user === undefined || user === null) {\r\n      if (user === null) router.push(\"/login\");\r\n    }\r\n  }, [user, router]);\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      <div className=\"flex items-center justify-between mb-8\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-extrabold tracking-tight text-slate-900\">\r\n            Dashboard\r\n          </h1>\r\n          <p className=\"text-sm text-slate-500 mt-1\">\r\n            Overview of activity and health across teams & projects.\r\n          </p>\r\n        </div>\r\n        <div className=\"flex items-center gap-3\">\r\n          <button\r\n            onClick={() => router.push(\"/projects\")}\r\n            className=\"inline-flex items-center gap-2 bg-linear-to-r from-indigo-600 to-violet-500 text-white px-4 py-2 rounded-lg shadow hover:scale-[1.01] transition\"\r\n          >\r\n            View Projects\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {err && <div className=\"mb-4 text-red-600\">{err}</div>}\r\n\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\r\n        {/* Card: Users */}\r\n        <div className=\"bg-white p-5 rounded-2xl shadow-sm border\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <div className=\"text-sm text-slate-500\">Total users</div>\r\n              <div className=\"text-2xl font-semibold mt-1 text-slate-800\">\r\n                {loading ? \"—\" : totals.totalUsers}\r\n              </div>\r\n            </div>\r\n            <div className=\"p-2 bg-indigo-50 rounded-full\">\r\n              <svg width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n                <path\r\n                  d=\"M12 12c2.761 0 5-2.239 5-5s-2.239-5-5-5-5 2.239-5 5 2.239 5 5 5z\"\r\n                  stroke=\"#4F46E5\"\r\n                  strokeWidth=\"1.5\"\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                />\r\n                <path\r\n                  d=\"M21 21v-2c0-2.761-3.134-5-7-5H10c-3.866 0-7 2.239-7 5v2\"\r\n                  stroke=\"#7C3AED\"\r\n                  strokeWidth=\"1.5\"\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n          <div className=\"text-xs text-slate-500 mt-3\">All active users.</div>\r\n        </div>\r\n\r\n        {/* Card: Teams */}\r\n        <div className=\"bg-white p-5 rounded-2xl shadow-sm border\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <div className=\"text-sm text-slate-500\">Teams</div>\r\n              <div className=\"text-2xl font-semibold mt-1 text-slate-800\">\r\n                {loading ? \"—\" : totals.totalTeams}\r\n              </div>\r\n            </div>\r\n            <div className=\"p-2 bg-emerald-50 rounded-full\">\r\n              <svg width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n                <path\r\n                  d=\"M12 12c2.761 0 5-2.239 5-5S14.761 2 12 2 7 4.239 7 7s2.239 5 5 5z\"\r\n                  stroke=\"#059669\"\r\n                  strokeWidth=\"1.5\"\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                />\r\n                <path\r\n                  d=\"M2 22v-2c0-2.761 3.134-5 7-5h6c3.866 0 7 2.239 7 5v2\"\r\n                  stroke=\"#10B981\"\r\n                  strokeWidth=\"1.5\"\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n          <div className=\"text-xs text-slate-500 mt-3\">\r\n            Number of teams you can access.\r\n          </div>\r\n        </div>\r\n\r\n        {/* Card: Projects */}\r\n        <div className=\"bg-white p-5 rounded-2xl shadow-sm border\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <div className=\"text-sm text-slate-500\">Projects</div>\r\n              <div className=\"text-2xl font-semibold mt-1 text-slate-800\">\r\n                {loading ? \"—\" : totals.totalProjects}\r\n              </div>\r\n            </div>\r\n            <div className=\"p-2 bg-yellow-50 rounded-full\">\r\n              <svg width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n                <rect\r\n                  x=\"3\"\r\n                  y=\"3\"\r\n                  width=\"18\"\r\n                  height=\"18\"\r\n                  rx=\"2\"\r\n                  stroke=\"#D97706\"\r\n                  strokeWidth=\"1.5\"\r\n                />\r\n                <path\r\n                  d=\"M8 7h8\"\r\n                  stroke=\"#B45309\"\r\n                  strokeWidth=\"1.5\"\r\n                  strokeLinecap=\"round\"\r\n                />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n          <div className=\"text-xs text-slate-500 mt-3\">\r\n            Active projects in your scope.\r\n          </div>\r\n        </div>\r\n\r\n        {/* Card: Tasks */}\r\n        <div className=\"bg-white p-5 rounded-2xl shadow-sm border\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <div className=\"text-sm text-slate-500\">Tasks</div>\r\n              <div className=\"text-2xl font-semibold mt-1 text-slate-800\">\r\n                {loading ? \"—\" : totals.totalTasks}\r\n              </div>\r\n            </div>\r\n            <div className=\"p-2 bg-rose-50 rounded-full\">\r\n              <svg width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n                <path\r\n                  d=\"M4 7h16M4 12h16M10 17h10\"\r\n                  stroke=\"#EF4444\"\r\n                  strokeWidth=\"1.5\"\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n          <div className=\"text-xs text-slate-500 mt-3\">\r\n            All tasks across visible projects.\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Status breakdown + upcoming due + per-team projects */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        <section className=\"lg:col-span-1 bg-white p-5 rounded-2xl shadow-sm border\">\r\n          <h3 className=\"text-lg font-semibold mb-4\">Task status</h3>\r\n          <div className=\"space-y-3\">\r\n            {([\"TODO\", \"IN_PROGRESS\", \"FINISHED\"] as const).map((k) => {\r\n              const val = totals.statusCounts[k] || 0;\r\n              const percent = pct(val, totals.totalTasks);\r\n              return (\r\n                <div key={k}>\r\n                  <div className=\"flex justify-between text-sm mb-1\">\r\n                    <div className=\"font-medium\">{k.replace(\"_\", \" \")}</div>\r\n                    <div className=\"text-slate-500\">{val}</div>\r\n                  </div>\r\n                  <div className=\"w-full bg-slate-100 rounded-full h-2 overflow-hidden\">\r\n                    <div\r\n                      style={{ width: `${percent}%` }}\r\n                      className={`h-2 ${\r\n                        k === \"FINISHED\"\r\n                          ? \"bg-emerald-500\"\r\n                          : k === \"IN_PROGRESS\"\r\n                          ? \"bg-indigo-500\"\r\n                          : \"bg-amber-400\"\r\n                      }`}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </section>\r\n\r\n        <section className=\"lg:col-span-1 bg-white p-5 rounded-2xl shadow-sm border\">\r\n          <h3 className=\"text-lg font-semibold mb-4\">Upcoming due</h3>\r\n          <div className=\"space-y-3\">\r\n            {totals.upcoming.length === 0 && (\r\n              <div className=\"text-sm text-slate-500\">\r\n                No upcoming due dates\r\n              </div>\r\n            )}\r\n            {totals.upcoming.slice(0, 6).map((pr: Project) => {\r\n              // compute progress from assignedAt -> dueDate\r\n              let percent = 0;\r\n              if (pr.assignedAt && pr.dueDate) {\r\n                const from = new Date(pr.assignedAt).getTime();\r\n                const to = new Date(pr.dueDate).getTime();\r\n                const now = Date.now();\r\n                if (to > from) {\r\n                  percent = Math.min(\r\n                    100,\r\n                    Math.max(0, Math.round(((now - from) / (to - from)) * 100))\r\n                  );\r\n                }\r\n              }\r\n              return (\r\n                <div key={pr.id} className=\"border rounded p-3\">\r\n                  <div className=\"flex justify-between items-start\">\r\n                    <div>\r\n                      <div className=\"font-medium\">{pr.name}</div>\r\n                      <div className=\"text-xs text-slate-500\">\r\n                        {pr.team?.name ?? \"Unassigned\"}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-sm text-slate-600\">\r\n                      {timeLeftText(pr.dueDate)}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"mt-3\">\r\n                    <div className=\"w-full bg-slate-100 h-2 rounded-full overflow-hidden\">\r\n                      <div\r\n                        style={{ width: `${percent}%` }}\r\n                        className=\"h-2 bg-indigo-400\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"text-xs text-slate-500 mt-1\">\r\n                      Due: {niceDate(pr.dueDate)}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </section>\r\n\r\n        <section className=\"lg:col-span-1 bg-white p-5 rounded-2xl shadow-sm border\">\r\n          <h3 className=\"text-lg font-semibold mb-4\">Projects by team</h3>\r\n          <div className=\"space-y-2 max-h-80 overflow-y-auto pr-2\">\r\n            {Object.keys(totals.perTeam).length === 0 && (\r\n              <div className=\"text-sm text-slate-500\">No projects</div>\r\n            )}\r\n            {Object.entries(totals.perTeam).map(([teamId, list]) => {\r\n              const found = teams.find((t: any) => {\r\n                const idA = (t as any).id ?? (t as any).team?.id;\r\n                return idA === teamId;\r\n              });\r\n\r\n              // prefer top-level name, then nested team.name, then fallback\r\n              const teamName =\r\n                found?.name ??\r\n                found?.team?.name ??\r\n                (teamId === \"Unassigned\" ? \"Unassigned\" : teamId);\r\n              return (\r\n                <div\r\n                  key={teamId}\r\n                  className=\"flex justify-between items-center p-2 bg-slate-50 rounded\"\r\n                >\r\n                  <div>\r\n                    <div className=\"text-sm font-medium\">{teamName}</div>\r\n                    <div className=\"text-xs text-slate-500\">\r\n                      {list.length} projects\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"text-sm text-slate-600\">\r\n                    {list\r\n                      .slice(0, 2)\r\n                      .map((p) => p.name)\r\n                      .join(\", \")}\r\n                    {list.length > 2 ? ` +${list.length - 2}` : \"\"}\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </section>\r\n      </div>\r\n\r\n      {/* recent projects table */}\r\n      <div className=\"mt-8 bg-white p-5 rounded-2xl shadow-sm border\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h3 className=\"text-lg font-semibold\">Recent projects</h3>\r\n          <div className=\"text-sm text-slate-500\">\r\n            {totals.totalProjects} projects\r\n          </div>\r\n        </div>\r\n\r\n        {loading ? (\r\n          <div className=\"py-12 text-center text-slate-500\">\r\n            Loading projects...\r\n          </div>\r\n        ) : projects.length === 0 ? (\r\n          <div className=\"py-8 text-center text-slate-500\">\r\n            No projects available\r\n          </div>\r\n        ) : (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full text-left\">\r\n              <thead>\r\n                <tr className=\"text-xs text-slate-500 border-b\">\r\n                  <th className=\"py-2\">Project</th>\r\n                  <th className=\"py-2\">Team</th>\r\n                  <th className=\"py-2\">Tasks</th>\r\n                  <th className=\"py-2\">Due</th>\r\n                  <th className=\"py-2\">Status</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {projects.slice(0, 12).map((pr) => {\r\n                  const taskCount = (pr.columns ?? []).reduce(\r\n                    (acc: number, c: any) =>\r\n                      acc + ((c.tasks ?? []).length || 0),\r\n                    0\r\n                  );\r\n                  const finished = (pr.columns ?? []).reduce(\r\n                    (acc: number, c: any) =>\r\n                      acc +\r\n                      ((c.tasks ?? []).filter(\r\n                        (t: any) => t.status === \"FINISHED\"\r\n                      ).length || 0),\r\n                    0\r\n                  );\r\n                  const statusLabel =\r\n                    finished === taskCount && taskCount > 0\r\n                      ? \"Completed\"\r\n                      : pr.dueDate &&\r\n                        new Date(pr.dueDate).getTime() < Date.now()\r\n                      ? \"Overdue\"\r\n                      : \"Active\";\r\n                  return (\r\n                    <tr key={pr.id} className=\"border-b last:border-0\">\r\n                      <td className=\"py-3\">\r\n                        <div className=\"font-medium\">{pr.name}</div>\r\n                        <div className=\"text-xs text-slate-500\">\r\n                          {pr.description ?? \"—\"}\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"py-3\">{pr.team?.name ?? \"Unassigned\"}</td>\r\n                      <td className=\"py-3\">{taskCount}</td>\r\n                      <td className=\"py-3\">\r\n                        {formatDateShort(\r\n                          pr.dueDate ? niceDate(pr.dueDate) : \"—\"\r\n                        )}\r\n                      </td>\r\n                      <td className=\"py-3\">\r\n                        <span\r\n                          className={`px-2 py-1 rounded text-xs ${\r\n                            statusLabel === \"Completed\"\r\n                              ? \"bg-emerald-100 text-emerald-800\"\r\n                              : statusLabel === \"Overdue\"\r\n                              ? \"bg-rose-100 text-rose-800\"\r\n                              : \"bg-indigo-100 text-indigo-800\"\r\n                          }`}\r\n                        >\r\n                          {statusLabel}\r\n                        </span>\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AACA;AAMA;AATA;;;;;;AAeA,SAAS,SAAS,CAAiB;IACjC,IAAI,CAAC,GAAG,OAAO;IACf,IAAI;QACF,MAAM,KAAK,IAAI,KAAK;QACpB,OAAO,GAAG,kBAAkB;IAC9B,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEA,SAAS,aAAa,CAAiB;IACrC,IAAI,CAAC,GAAG,OAAO;IACf,MAAM,MAAM,KAAK,GAAG;IACpB,MAAM,MAAM,IAAI,KAAK,GAAG,OAAO;IAC/B,MAAM,OAAO,MAAM;IACnB,IAAI,QAAQ,GAAG,OAAO;IACtB,MAAM,OAAO,KAAK,KAAK,CAAC,OAAO,CAAC,OAAO,KAAK,KAAK,EAAE;IACnD,MAAM,QAAQ,KAAK,KAAK,CAAC,AAAC,OAAO,CAAC,OAAO,KAAK,KAAK,EAAE,IAAK,CAAC,OAAO,KAAK,EAAE;IACzE,IAAI,OAAO,GAAG,OAAO,GAAG,KAAK,EAAE,EAAE,MAAM,MAAM,CAAC;IAC9C,MAAM,OAAO,KAAK,KAAK,CAAC,AAAC,OAAO,CAAC,OAAO,KAAK,EAAE,IAAK,CAAC,OAAO,EAAE;IAC9D,IAAI,QAAQ,GAAG,OAAO,GAAG,MAAM,EAAE,EAAE,KAAK,MAAM,CAAC;IAC/C,OAAO,GAAG,KAAK,MAAM,CAAC;AACxB;AAEO,SAAS,gBAAgB,OAAuB;IACrD,IAAI,CAAC,SAAS,OAAO;IACrB,IAAI;QACF,MAAM,IAAI,IAAI,KAAK;QACnB,OAAO,IAAI,KAAK,cAAc,CAAC,SAAS;YACtC,KAAK;YACL,OAAO;YACP,MAAM;QACR,GAAG,MAAM,CAAC;IACZ,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEe,SAAS;IACtB,MAAM,SAAS,IAAA,2JAAS;IACxB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,qJAAO;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,6NAAQ,EAAC;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,6NAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6NAAQ,EAAS,EAAE;IAC7C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6NAAQ,EAAS,EAAE;IAC7C,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,6NAAQ,EAAgB;IAE9C,IAAA,8NAAS,EAAC;QACR,IAAI,UAAU;QACd,WAAW;QACX,OAAO;QAEP,CAAC;YACC,IAAI;gBACF,MAAM,IAAI,MAAM,IAAA,6IAAY,KAAI,sCAAsC;gBACtE,IAAI,CAAC,SAAS;gBACd,YAAY,MAAM,OAAO,CAAC,KAAK,IAAI,EAAE;gBAErC,+CAA+C;gBAC/C,IAAI,MAAM,SAAS,SAAS;oBAC1B,IAAI;wBACF,MAAM,IAAI,MAAM,IAAA,4IAAW;wBAC3B,IAAI,SAAS,SAAS,MAAM,OAAO,CAAC,KAAK,IAAI,EAAE;oBACjD,EAAE,OAAM;wBACN,MAAM,KAAK,MAAM,IAAA,2IAAU;wBAC3B,IAAI,SAAS,SAAS,MAAM,OAAO,CAAC,MAAM,KAAK,EAAE;oBACnD;gBACF,OAAO;oBACL,MAAM,IAAI,MAAM,IAAA,2IAAU;oBAC1B,IAAI,SAAS,SAAS,MAAM,OAAO,CAAC,KAAK,IAAI,EAAE;gBACjD;gBAEA,4CAA4C;gBAC5C,IAAI,MAAM,SAAS,SAAS;oBAC1B,IAAI;wBACF,MAAM,IAAI,MAAM,IAAA,4IAAW;wBAC3B,IAAI,SAAS,SAAS,MAAM,OAAO,CAAC,KAAK,IAAI,EAAE;oBACjD,EAAE,OAAM;wBACN,IAAI,SAAS,SAAS,EAAE;oBAC1B;gBACF,OAAO;oBACL,IAAI,SAAS,SAAS,EAAE;gBAC1B;YACF,EAAE,OAAO,GAAQ;gBACf,IAAI,SAAS,OAAO;YACtB,SAAU;gBACR,IAAI,SAAS,WAAW;YAC1B;QACF,CAAC;QAED,OAAO;YACL,UAAU;QACZ;IACF,GAAG;QAAC;KAAK;IAET,kBAAkB;IAClB,MAAM,SAAS,IAAA,4NAAO,EAAC;QACrB,MAAM,gBAAgB,SAAS,MAAM;QACrC,IAAI,aAAa;QACjB,MAAM,eAAuC;YAC3C,MAAM;YACN,aAAa;YACb,UAAU;QACZ;QACA,KAAK,MAAM,KAAK,SAAU;YACxB,MAAM,OAAO,EAAE,OAAO,IAAI,EAAE;YAC5B,KAAK,MAAM,KAAK,KAAM;gBACpB,MAAM,QAAQ,EAAE,KAAK,IAAI,EAAE;gBAC3B,cAAc,MAAM,MAAM;gBAC1B,KAAK,MAAM,KAAK,MAAO;oBACrB,MAAM,IAAI,CAAC,EAAE,MAAM,IAAI,MAAM,EAAE,QAAQ;oBACvC,YAAY,CAAC,EAAE,GAAG,CAAC,YAAY,CAAC,EAAE,IAAI,CAAC,IAAI;gBAC7C;YACF;QACF;QACA,MAAM,aAAa,MAAM,MAAM;QAC/B,MAAM,aAAa,MAAM,MAAM;QAE/B,6CAA6C;QAC7C,MAAM,UAAU,SACb,GAAG,CAAC,CAAC,KAAO,CAAC;gBACZ,GAAG,EAAE;gBACL,OAAO,GAAG,OAAO,GAAG,IAAI,KAAK,GAAG,OAAO,EAAE,OAAO,KAAK;YACvD,CAAC,GACA,MAAM,CAAC,CAAC,KAAO,GAAG,KAAK,EACvB,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,KAAK,GAAI,EAAE,KAAK;QAEpC,oBAAoB;QACpB,MAAM,UAAqC,CAAC;QAC5C,KAAK,MAAM,MAAM,SAAU;YACzB,MAAM,IAAI,GAAG,IAAI,EAAE,MAAM,GAAG,MAAM,IAAI;YACtC,OAAO,CAAC,EAAE,GAAG,OAAO,CAAC,EAAE,IAAI,EAAE;YAC7B,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC;QAClB;QAEA,OAAO;YACL;YACA;YACA;YACA;YACA;YACA,UAAU;YACV;QACF;IACF,GAAG;QAAC;QAAU;QAAO;KAAM;IAE3B,iBAAiB;IACjB,SAAS,IAAI,IAAY,EAAE,KAAa;QACtC,IAAI,UAAU,GAAG,OAAO;QACxB,OAAO,KAAK,KAAK,CAAC,AAAC,OAAO,QAAS;IACrC;IAEA,kDAAkD;IAClD,IAAA,8NAAS,EAAC;QACR,IAAI,SAAS,aAAa,SAAS,MAAM;YACvC,IAAI,SAAS,MAAM,OAAO,IAAI,CAAC;QACjC;IACF,GAAG;QAAC;QAAM;KAAO;IAEjB,qBACE,0PAAC;QAAI,WAAU;;0BACb,0PAAC;gBAAI,WAAU;;kCACb,0PAAC;;0CACC,0PAAC;gCAAG,WAAU;0CAAwD;;;;;;0CAGtE,0PAAC;gCAAE,WAAU;0CAA8B;;;;;;;;;;;;kCAI7C,0PAAC;wBAAI,WAAU;kCACb,cAAA,0PAAC;4BACC,SAAS,IAAM,OAAO,IAAI,CAAC;4BAC3B,WAAU;sCACX;;;;;;;;;;;;;;;;;YAMJ,qBAAO,0PAAC;gBAAI,WAAU;0BAAqB;;;;;;0BAE5C,0PAAC;gBAAI,WAAU;;kCAEb,0PAAC;wBAAI,WAAU;;0CACb,0PAAC;gCAAI,WAAU;;kDACb,0PAAC;;0DACC,0PAAC;gDAAI,WAAU;0DAAyB;;;;;;0DACxC,0PAAC;gDAAI,WAAU;0DACZ,UAAU,MAAM,OAAO,UAAU;;;;;;;;;;;;kDAGtC,0PAAC;wCAAI,WAAU;kDACb,cAAA,0PAAC;4CAAI,OAAM;4CAAK,QAAO;4CAAK,SAAQ;4CAAY,MAAK;;8DACnD,0PAAC;oDACC,GAAE;oDACF,QAAO;oDACP,aAAY;oDACZ,eAAc;oDACd,gBAAe;;;;;;8DAEjB,0PAAC;oDACC,GAAE;oDACF,QAAO;oDACP,aAAY;oDACZ,eAAc;oDACd,gBAAe;;;;;;;;;;;;;;;;;;;;;;;0CAKvB,0PAAC;gCAAI,WAAU;0CAA8B;;;;;;;;;;;;kCAI/C,0PAAC;wBAAI,WAAU;;0CACb,0PAAC;gCAAI,WAAU;;kDACb,0PAAC;;0DACC,0PAAC;gDAAI,WAAU;0DAAyB;;;;;;0DACxC,0PAAC;gDAAI,WAAU;0DACZ,UAAU,MAAM,OAAO,UAAU;;;;;;;;;;;;kDAGtC,0PAAC;wCAAI,WAAU;kDACb,cAAA,0PAAC;4CAAI,OAAM;4CAAK,QAAO;4CAAK,SAAQ;4CAAY,MAAK;;8DACnD,0PAAC;oDACC,GAAE;oDACF,QAAO;oDACP,aAAY;oDACZ,eAAc;oDACd,gBAAe;;;;;;8DAEjB,0PAAC;oDACC,GAAE;oDACF,QAAO;oDACP,aAAY;oDACZ,eAAc;oDACd,gBAAe;;;;;;;;;;;;;;;;;;;;;;;0CAKvB,0PAAC;gCAAI,WAAU;0CAA8B;;;;;;;;;;;;kCAM/C,0PAAC;wBAAI,WAAU;;0CACb,0PAAC;gCAAI,WAAU;;kDACb,0PAAC;;0DACC,0PAAC;gDAAI,WAAU;0DAAyB;;;;;;0DACxC,0PAAC;gDAAI,WAAU;0DACZ,UAAU,MAAM,OAAO,aAAa;;;;;;;;;;;;kDAGzC,0PAAC;wCAAI,WAAU;kDACb,cAAA,0PAAC;4CAAI,OAAM;4CAAK,QAAO;4CAAK,SAAQ;4CAAY,MAAK;;8DACnD,0PAAC;oDACC,GAAE;oDACF,GAAE;oDACF,OAAM;oDACN,QAAO;oDACP,IAAG;oDACH,QAAO;oDACP,aAAY;;;;;;8DAEd,0PAAC;oDACC,GAAE;oDACF,QAAO;oDACP,aAAY;oDACZ,eAAc;;;;;;;;;;;;;;;;;;;;;;;0CAKtB,0PAAC;gCAAI,WAAU;0CAA8B;;;;;;;;;;;;kCAM/C,0PAAC;wBAAI,WAAU;;0CACb,0PAAC;gCAAI,WAAU;;kDACb,0PAAC;;0DACC,0PAAC;gDAAI,WAAU;0DAAyB;;;;;;0DACxC,0PAAC;gDAAI,WAAU;0DACZ,UAAU,MAAM,OAAO,UAAU;;;;;;;;;;;;kDAGtC,0PAAC;wCAAI,WAAU;kDACb,cAAA,0PAAC;4CAAI,OAAM;4CAAK,QAAO;4CAAK,SAAQ;4CAAY,MAAK;sDACnD,cAAA,0PAAC;gDACC,GAAE;gDACF,QAAO;gDACP,aAAY;gDACZ,eAAc;gDACd,gBAAe;;;;;;;;;;;;;;;;;;;;;;0CAKvB,0PAAC;gCAAI,WAAU;0CAA8B;;;;;;;;;;;;;;;;;;0BAOjD,0PAAC;gBAAI,WAAU;;kCACb,0PAAC;wBAAQ,WAAU;;0CACjB,0PAAC;gCAAG,WAAU;0CAA6B;;;;;;0CAC3C,0PAAC;gCAAI,WAAU;0CACZ,AAAC;oCAAC;oCAAQ;oCAAe;iCAAW,CAAW,GAAG,CAAC,CAAC;oCACnD,MAAM,MAAM,OAAO,YAAY,CAAC,EAAE,IAAI;oCACtC,MAAM,UAAU,IAAI,KAAK,OAAO,UAAU;oCAC1C,qBACE,0PAAC;;0DACC,0PAAC;gDAAI,WAAU;;kEACb,0PAAC;wDAAI,WAAU;kEAAe,EAAE,OAAO,CAAC,KAAK;;;;;;kEAC7C,0PAAC;wDAAI,WAAU;kEAAkB;;;;;;;;;;;;0DAEnC,0PAAC;gDAAI,WAAU;0DACb,cAAA,0PAAC;oDACC,OAAO;wDAAE,OAAO,GAAG,QAAQ,CAAC,CAAC;oDAAC;oDAC9B,WAAW,CAAC,IAAI,EACd,MAAM,aACF,mBACA,MAAM,gBACN,kBACA,gBACJ;;;;;;;;;;;;uCAdE;;;;;gCAmBd;;;;;;;;;;;;kCAIJ,0PAAC;wBAAQ,WAAU;;0CACjB,0PAAC;gCAAG,WAAU;0CAA6B;;;;;;0CAC3C,0PAAC;gCAAI,WAAU;;oCACZ,OAAO,QAAQ,CAAC,MAAM,KAAK,mBAC1B,0PAAC;wCAAI,WAAU;kDAAyB;;;;;;oCAIzC,OAAO,QAAQ,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC;wCAChC,8CAA8C;wCAC9C,IAAI,UAAU;wCACd,IAAI,GAAG,UAAU,IAAI,GAAG,OAAO,EAAE;4CAC/B,MAAM,OAAO,IAAI,KAAK,GAAG,UAAU,EAAE,OAAO;4CAC5C,MAAM,KAAK,IAAI,KAAK,GAAG,OAAO,EAAE,OAAO;4CACvC,MAAM,MAAM,KAAK,GAAG;4CACpB,IAAI,KAAK,MAAM;gDACb,UAAU,KAAK,GAAG,CAChB,KACA,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC,AAAC,CAAC,MAAM,IAAI,IAAI,CAAC,KAAK,IAAI,IAAK;4CAE1D;wCACF;wCACA,qBACE,0PAAC;4CAAgB,WAAU;;8DACzB,0PAAC;oDAAI,WAAU;;sEACb,0PAAC;;8EACC,0PAAC;oEAAI,WAAU;8EAAe,GAAG,IAAI;;;;;;8EACrC,0PAAC;oEAAI,WAAU;8EACZ,GAAG,IAAI,EAAE,QAAQ;;;;;;;;;;;;sEAGtB,0PAAC;4DAAI,WAAU;sEACZ,aAAa,GAAG,OAAO;;;;;;;;;;;;8DAG5B,0PAAC;oDAAI,WAAU;;sEACb,0PAAC;4DAAI,WAAU;sEACb,cAAA,0PAAC;gEACC,OAAO;oEAAE,OAAO,GAAG,QAAQ,CAAC,CAAC;gEAAC;gEAC9B,WAAU;;;;;;;;;;;sEAGd,0PAAC;4DAAI,WAAU;;gEAA8B;gEACrC,SAAS,GAAG,OAAO;;;;;;;;;;;;;;2CApBrB,GAAG,EAAE;;;;;oCAyBnB;;;;;;;;;;;;;kCAIJ,0PAAC;wBAAQ,WAAU;;0CACjB,0PAAC;gCAAG,WAAU;0CAA6B;;;;;;0CAC3C,0PAAC;gCAAI,WAAU;;oCACZ,OAAO,IAAI,CAAC,OAAO,OAAO,EAAE,MAAM,KAAK,mBACtC,0PAAC;wCAAI,WAAU;kDAAyB;;;;;;oCAEzC,OAAO,OAAO,CAAC,OAAO,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC,QAAQ,KAAK;wCACjD,MAAM,QAAQ,MAAM,IAAI,CAAC,CAAC;4CACxB,MAAM,MAAM,AAAC,EAAU,EAAE,IAAI,AAAC,EAAU,IAAI,EAAE;4CAC9C,OAAO,QAAQ;wCACjB;wCAEA,8DAA8D;wCAC9D,MAAM,WACJ,OAAO,QACP,OAAO,MAAM,QACb,CAAC,WAAW,eAAe,eAAe,MAAM;wCAClD,qBACE,0PAAC;4CAEC,WAAU;;8DAEV,0PAAC;;sEACC,0PAAC;4DAAI,WAAU;sEAAuB;;;;;;sEACtC,0PAAC;4DAAI,WAAU;;gEACZ,KAAK,MAAM;gEAAC;;;;;;;;;;;;;8DAGjB,0PAAC;oDAAI,WAAU;;wDACZ,KACE,KAAK,CAAC,GAAG,GACT,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI,EACjB,IAAI,CAAC;wDACP,KAAK,MAAM,GAAG,IAAI,CAAC,EAAE,EAAE,KAAK,MAAM,GAAG,GAAG,GAAG;;;;;;;;2CAdzC;;;;;oCAkBX;;;;;;;;;;;;;;;;;;;0BAMN,0PAAC;gBAAI,WAAU;;kCACb,0PAAC;wBAAI,WAAU;;0CACb,0PAAC;gCAAG,WAAU;0CAAwB;;;;;;0CACtC,0PAAC;gCAAI,WAAU;;oCACZ,OAAO,aAAa;oCAAC;;;;;;;;;;;;;oBAIzB,wBACC,0PAAC;wBAAI,WAAU;kCAAmC;;;;;+BAGhD,SAAS,MAAM,KAAK,kBACtB,0PAAC;wBAAI,WAAU;kCAAkC;;;;;6CAIjD,0PAAC;wBAAI,WAAU;kCACb,cAAA,0PAAC;4BAAM,WAAU;;8CACf,0PAAC;8CACC,cAAA,0PAAC;wCAAG,WAAU;;0DACZ,0PAAC;gDAAG,WAAU;0DAAO;;;;;;0DACrB,0PAAC;gDAAG,WAAU;0DAAO;;;;;;0DACrB,0PAAC;gDAAG,WAAU;0DAAO;;;;;;0DACrB,0PAAC;gDAAG,WAAU;0DAAO;;;;;;0DACrB,0PAAC;gDAAG,WAAU;0DAAO;;;;;;;;;;;;;;;;;8CAGzB,0PAAC;8CACE,SAAS,KAAK,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC;wCAC1B,MAAM,YAAY,CAAC,GAAG,OAAO,IAAI,EAAE,EAAE,MAAM,CACzC,CAAC,KAAa,IACZ,MAAM,CAAC,CAAC,EAAE,KAAK,IAAI,EAAE,EAAE,MAAM,IAAI,CAAC,GACpC;wCAEF,MAAM,WAAW,CAAC,GAAG,OAAO,IAAI,EAAE,EAAE,MAAM,CACxC,CAAC,KAAa,IACZ,MACA,CAAC,CAAC,EAAE,KAAK,IAAI,EAAE,EAAE,MAAM,CACrB,CAAC,IAAW,EAAE,MAAM,KAAK,YACzB,MAAM,IAAI,CAAC,GACf;wCAEF,MAAM,cACJ,aAAa,aAAa,YAAY,IAClC,cACA,GAAG,OAAO,IACV,IAAI,KAAK,GAAG,OAAO,EAAE,OAAO,KAAK,KAAK,GAAG,KACzC,YACA;wCACN,qBACE,0PAAC;4CAAe,WAAU;;8DACxB,0PAAC;oDAAG,WAAU;;sEACZ,0PAAC;4DAAI,WAAU;sEAAe,GAAG,IAAI;;;;;;sEACrC,0PAAC;4DAAI,WAAU;sEACZ,GAAG,WAAW,IAAI;;;;;;;;;;;;8DAGvB,0PAAC;oDAAG,WAAU;8DAAQ,GAAG,IAAI,EAAE,QAAQ;;;;;;8DACvC,0PAAC;oDAAG,WAAU;8DAAQ;;;;;;8DACtB,0PAAC;oDAAG,WAAU;8DACX,gBACC,GAAG,OAAO,GAAG,SAAS,GAAG,OAAO,IAAI;;;;;;8DAGxC,0PAAC;oDAAG,WAAU;8DACZ,cAAA,0PAAC;wDACC,WAAW,CAAC,0BAA0B,EACpC,gBAAgB,cACZ,oCACA,gBAAgB,YAChB,8BACA,iCACJ;kEAED;;;;;;;;;;;;2CAxBE,GAAG,EAAE;;;;;oCA6BlB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQhB","debugId":null}}]
}